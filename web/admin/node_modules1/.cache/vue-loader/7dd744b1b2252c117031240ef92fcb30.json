{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/Diff.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/Diff.vue","mtime":1624937546851},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogIHZhciAkcyA9IHJlcXVpcmUoJ3NjcmlwdGpzJykKfQpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGNhbGxiYWNrOiAnJwogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRlbnQ6ICcnLAogICAgICBoaXN0b3J5Q29udGVudDogJycKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHt9LAogIG1ldGhvZHM6IHsKICAgIGdldF9jb250ZW50KCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL3BhZ2UvZGlmZicKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdwYWdlX2lkJywgdGhhdC4kcm91dGUucGFyYW1zLnBhZ2VfaWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ3BhZ2VfaGlzdG9yeV9pZCcsIHRoYXQuJHJvdXRlLnBhcmFtcy5wYWdlX2hpc3RvcnlfaWQpCiAgICAgIHRoYXQuJGh0dHAKICAgICAgICAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIGpzb24gPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgdGhhdC5jb250ZW50ID0ganNvbi5QYWdlLnBhZ2Vjb250ZW50CiAgICAgICAgICAgIHRoYXQuaGlzdG9yeUNvbnRlbnQgPSBqc29uLlBhZ2VIaXN0b3J5LnBhZ2Vjb250ZW50CiAgICAgICAgICAgIHRoYXQuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICB0aGF0LmRpZmZVc2luZ0pTKDApCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgZGlmZlVzaW5nSlModmlld1R5cGUpIHsKICAgICAgJ3VzZSBzdHJpY3QnCiAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb25lLXZhcgogICAgICB2YXIgYnlJZCA9IGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpCiAgICAgICAgfSwKICAgICAgICBiYXNlID0gZGlmZmxpYi5zdHJpbmdBc0xpbmVzKGJ5SWQoJ2Jhc2VUZXh0JykudmFsdWUpLAogICAgICAgIG5ld3R4dCA9IGRpZmZsaWIuc3RyaW5nQXNMaW5lcyhieUlkKCduZXdUZXh0JykudmFsdWUpLAogICAgICAgIHNtID0gbmV3IGRpZmZsaWIuU2VxdWVuY2VNYXRjaGVyKGJhc2UsIG5ld3R4dCksCiAgICAgICAgb3Bjb2RlcyA9IHNtLmdldF9vcGNvZGVzKCksCiAgICAgICAgZGlmZm91dHB1dGRpdiA9IGJ5SWQoJ2RpZmZvdXRwdXQnKQogICAgICBkaWZmb3V0cHV0ZGl2LmlubmVySFRNTCA9ICcnCiAgICAgIGRpZmZvdXRwdXRkaXYuYXBwZW5kQ2hpbGQoCiAgICAgICAgZGlmZnZpZXcuYnVpbGRWaWV3KHsKICAgICAgICAgIGJhc2VUZXh0TGluZXM6IGJhc2UsCiAgICAgICAgICBuZXdUZXh0TGluZXM6IG5ld3R4dCwKICAgICAgICAgIG9wY29kZXM6IG9wY29kZXMsCiAgICAgICAgICBiYXNlVGV4dE5hbWU6IHRoYXQuJHQoJ2N1cl9wYWdlX2NvbnRlbnQnKSwKICAgICAgICAgIG5ld1RleHROYW1lOiB0aGF0LiR0KCdoaXN0b3J5X3ZlcnNpb24nKSwKICAgICAgICAgIHZpZXdUeXBlOiB2aWV3VHlwZQogICAgICAgIH0pCiAgICAgICkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAkcyhbYHN0YXRpYy9kaWZmL2RpZmZsaWIuanNgLCBgc3RhdGljL2RpZmYvZGlmZnZpZXcuanNgXSwgKCkgPT4gewogICAgICB0aGlzLmdldF9jb250ZW50KCkKICAgIH0pCiAgfSwKICBiZWZvcmVEZXN0cm95KCkge30KfQo="},{"version":3,"sources":["Diff.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Diff.vue","sourceRoot":"src/components/page","sourcesContent":["<!-- 更多模板 -->\n<template>\n  <div class=\"hello\">\n    <Header></Header>\n    <link href=\"static/diff/diffview.css\" rel=\"stylesheet\" />\n    <el-container class=\"container-narrow\">\n      <div class=\"textInput\">\n        <textarea id=\"baseText\" v-html=\"content\" style=\"display:none;\"></textarea>\n      </div>\n      <div class=\"textInput spacer\">\n        <textarea id=\"newText\" v-html=\"historyContent\" style=\"display:none;\"></textarea>\n      </div>\n\n      <div id=\"diffoutput\"></div>\n    </el-container>\n    <Footer></Footer>\n    <div class></div>\n  </div>\n</template>\n\n<style scoped>\n.top {\n  text-align: center;\n}\n.textInput {\n  display: block;\n  width: 49%;\n  float: left;\n  display: none;\n}\ntextarea {\n  width: 100%;\n  height: 300px;\n}\nlabel:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.spacer {\n  margin-left: 10px;\n}\n.viewType {\n  font-size: 16px;\n  clear: both;\n  text-align: center;\n  padding: 1em;\n}\n#diffoutput {\n  margin: 0 auto;\n}\n</style>\n\n<script>\nif (typeof window !== 'undefined') {\n  var $s = require('scriptjs')\n}\nexport default {\n  props: {\n    callback: ''\n  },\n  data() {\n    return {\n      content: '',\n      historyContent: ''\n    }\n  },\n  components: {},\n  methods: {\n    get_content() {\n      var that = this\n      var url = DocConfig.server + '/page/diff'\n      var params = new URLSearchParams()\n      params.append('page_id', that.$route.params.page_id)\n      params.append('page_history_id', that.$route.params.page_history_id)\n      that.$http\n        .post(url, params)\n        .then(function(response) {\n          if (response.data.status === 200) {\n            var json = response.data.data\n            that.content = json.Page.pagecontent\n            that.historyContent = json.PageHistory.pagecontent\n            that.$nextTick(() => {\n              that.diffUsingJS(0)\n            })\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function(error) {\n          console.log(error)\n        })\n    },\n    diffUsingJS(viewType) {\n      'use strict'\n      var that = this\n      // eslint-disable-next-line one-var\n      var byId = function(id) {\n          return document.getElementById(id)\n        },\n        base = difflib.stringAsLines(byId('baseText').value),\n        newtxt = difflib.stringAsLines(byId('newText').value),\n        sm = new difflib.SequenceMatcher(base, newtxt),\n        opcodes = sm.get_opcodes(),\n        diffoutputdiv = byId('diffoutput')\n      diffoutputdiv.innerHTML = ''\n      diffoutputdiv.appendChild(\n        diffview.buildView({\n          baseTextLines: base,\n          newTextLines: newtxt,\n          opcodes: opcodes,\n          baseTextName: that.$t('cur_page_content'),\n          newTextName: that.$t('history_version'),\n          viewType: viewType\n        })\n      )\n    }\n  },\n  mounted() {\n    $s([`static/diff/difflib.js`, `static/diff/diffview.js`], () => {\n      this.get_content()\n    })\n  },\n  beforeDestroy() {}\n}\n</script>\n"]}]}