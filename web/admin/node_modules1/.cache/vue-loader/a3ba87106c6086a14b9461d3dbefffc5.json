{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/show/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/show/Index.vue","mtime":1627029698377},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaG93UmVndWxhckl0ZW0gZnJvbSAnLi9zaG93X3JlZ3VsYXJfaXRlbS9JbmRleCcKaW1wb3J0IFNob3dTaW5nbGVQYWdlSXRlbSBmcm9tICcuL3Nob3dfc2luZ2xlX3BhZ2VfaXRlbS9JbmRleCcKaW1wb3J0IFNob3dUYWJsZUl0ZW0gZnJvbSAnLi9zaG93X3RhYmxlX2l0ZW0vSW5kZXgnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1faW5mbzogJycsCiAgICAgIGtleXdvcmQ6ICcnLAogICAgICBpdGVtbGFuZ0lkMjogJycsCiAgICAgIGl0ZW1sYW5nSWQzOiAnJywKICAgICAgYWNjZXNzIDogJycKICAgICAgLy8gbG9hZGluZzogZmFsc2UKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFNob3dSZWd1bGFySXRlbSwKICAgIFNob3dTaW5nbGVQYWdlSXRlbSwKICAgIFNob3dUYWJsZUl0ZW0KICB9LAogIG1ldGhvZHM6IHsKICAgIGl0ZW1fbGFuZ0lkMiAodmFsdWUpIHsKICAgICAgdGhpcy5pdGVtbGFuZ0lkMiA9IHZhbHVlCiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5pdGVtX2luZm8gPSAnJwogICAgICAgIHRoaXMuZ2V0X2l0ZW1fbWVudSh0aGlzLmtleXdvcmQpCiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5boj5zljZUKICAgIGFzeW5jIGdldF9pdGVtX21lbnUgKGtleXdvcmQpIHsKICAgICAgaWYgKCFrZXl3b3JkKSB7CiAgICAgICAga2V5d29yZCA9ICcnCiAgICAgIH0KICAgICAgLy8gdmFyIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKCkKICAgICAgdmFyIGl0ZW1faWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaXRlbV9pZCA/IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkIDogMAogICAgICB2YXIgcGFnZV9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2VfaWQgPyB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlX2lkIDogMAogICAgICB2YXIgdXJsID0gRG9jQ29uZmlnLnNlcnZlciArICcvaXRlbS9pbmZvJwogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ2lkJywgaXRlbV9pZCkKICAgICAgZm9ybWRhdGEuYXBwZW5kKCdrZXl3b3JkJywga2V5d29yZCkKICAgICAgZm9ybWRhdGEuYXBwZW5kKCdsYW5nX2lkJywgdGhpcy5pdGVtbGFuZ0lkMikKICAgICAgaWYgKCF0aGlzLmtleXdvcmQpIHsKICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2RlZmF1bHRwYWdlaWQnLCBwYWdlX2lkKQogICAgICB9CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QodXJsLCBmb3JtZGF0YSkKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIC8vIGxvYWRpbmcuY2xvc2UoKQogICAgICAgIHZhciBqc29uID0gcmVzLmRhdGEKICAgICAgICBpZiAoanNvbi5kZWZhdWx0cGFnZWlkIDw9IDAgfHwganNvbi5kZWZhdWx0cGFnZWlkID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmIChqc29uLm1lbnUucGFnZXNbMF0pIHsKICAgICAgICAgICAganNvbi5kZWZhdWx0cGFnZWlkID0gU3RyaW5nKGpzb24ubWVudS5wYWdlc1swXS5JRCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5pdGVtX2luZm8gPSBqc29uCiAgICAgICAgdGhpcy5pdGVtdGl0bGUgPSBqc29uLml0ZW10aXRsZQogICAgICAgIHRoaXMuYWNjZXNzID0gcmVzLmFjY2VzcwogICAgICAgIGlmIChqc29uLnVucmVhZF9jb3VudCA+IDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwMCwKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAnPGEgaHJlZj0iIy9ub3RpY2UvaW5kZXgiPuS9oOacieaWsOeahOacquivu+a2iOaBr++8jOeCueWHu+afpeecizwvYT4nCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBkb2N1bWVudC50aXRsZSA9dGhpcy5pdGVtdGl0bGUgKyctLURvYycKICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09PSAxMDMwNykgewogICAgICAgIC8vIOmcgOimgei+k+WFpeWvhueggQogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgIHBhdGg6ICcvaXRlbS9wYXNzd29yZC8nICsgaXRlbV9pZCwKICAgICAgICAgIHF1ZXJ5OiB7IHBhZ2VfaWQ6IHBhZ2VfaWQsIHJlZGlyZWN0OiB0aGlzLiRyb3V0ZXIuY3VycmVudFJvdXRlLmZ1bGxQYXRoIH0KICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGFsZXJ0KHJlcy5tZXNzYWdlKQogICAgICB9CiAgICAgIC8vIOiuvue9ruS4gOS4quacgOmVv+WFs+mXreaXtumXtAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvLyBsb2FkaW5nLmNsb3NlKCkKICAgICAgfSwgMTAwMDApCiAgICB9LAogICAgc2VhcmNoX2l0ZW0gKGtleXdvcmQpIHsKICAgICAgdGhpcy5pdGVtX2luZm8gPSAnJwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2hhbmdlSXRlbUluZm8nLCAnJykKICAgICAgdGhpcy5rZXl3b3JkID0ga2V5d29yZAogICAgICB0aGlzLmdldF9pdGVtX21lbnUoa2V5d29yZCkKICAgIH0sCiAgICBsb2FkQ29uZmlnICgpIHsKICAgICAgdmFyIGl0ZW1faWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaXRlbV9pZCA/IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkIDogMAogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL2FkbWluU2V0dGluZy9sb2FkTGFuZ0NvbmZpZycKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdpZCcsIGl0ZW1faWQpCiAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICB9CiAgICAgICAgICB0aGF0Lml0ZW1sYW5nSWQyID0gMAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIC8vIGRlZmF1bHRsYW5nIOaYr+WFqOWxgOivreiogAogICAgdGhpcy5pdGVtbGFuZ0lkMiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJkZWZhdWx0bGFuZyIpCiAgICB0aGlzLmxvYWRDb25maWcoKQogICAgdGhpcy5nZXRfaXRlbV9tZW51KHRoaXMua2V5d29yZCkKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjaGFuZ2VPcGVuQ2F0SWQnLCAwKQogICAgdGhpcy4kY29va2llcy5yZW1vdmUoJ3NlbGVjdGVkJykKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdkZWZhdWx0bGFuZycpCiAgfSwKICBiZWZvcmVEZXN0cm95ICgpIHsKICAgIHRoaXMuJG1lc3NhZ2UuY2xvc2VBbGwoKQogICAgZG9jdW1lbnQudGl0bGUgPSdEb2MnCiAgfQp9Cg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/item/show","sourcesContent":["<template>\n  <div class=\"hello\">\n    <Header></Header>\n    <!-- 展示常规项目 -->\n    <ShowRegularItem\n      :item_info=\"item_info\"\n      :search_item=\"search_item\"\n      :keyword=\"keyword\"\n      v-on:itemlangId2=\"item_langId2\"\n      v-if=\"item_info && (item_info.itemtype == 1 || item_info.itemtype == 3 || item_info.itemtype === '0' || item_info.itemtype === 0 )\"\n    ></ShowRegularItem>\n\n    <!-- 展示单页项目 -->\n    <ShowSinglePageItem :item_info=\"item_info\" v-if=\"item_info && item_info.itemtype == 2 \"></ShowSinglePageItem>\n\n    <!-- 展示表格项目 -->\n    <ShowTableItem :item_info=\"item_info\" v-if=\"item_info && item_info.itemtype == 4 \"></ShowTableItem>\n\n    <Footer></Footer>\n  </div>\n</template>\n\n<script>\nimport ShowRegularItem from './show_regular_item/Index'\nimport ShowSinglePageItem from './show_single_page_item/Index'\nimport ShowTableItem from './show_table_item/Index'\nexport default {\n  data () {\n    return {\n      item_info: '',\n      keyword: '',\n      itemlangId2: '',\n      itemlangId3: '',\n      access : ''\n      // loading: false\n    }\n  },\n  components: {\n    ShowRegularItem,\n    ShowSinglePageItem,\n    ShowTableItem\n  },\n  methods: {\n    item_langId2 (value) {\n      this.itemlangId2 = value\n      if (value !== undefined) {\n        this.item_info = ''\n        this.get_item_menu(this.keyword)\n      }\n    },\n    // 获取菜单\n    async get_item_menu (keyword) {\n      if (!keyword) {\n        keyword = ''\n      }\n      // var loading = this.$loading()\n      var item_id = this.$route.params.item_id ? this.$route.params.item_id : 0\n      var page_id = this.$route.query.page_id ? this.$route.query.page_id : 0\n      var url = DocConfig.server + '/item/info'\n      var formdata = new FormData()\n      formdata.append('id', item_id)\n      formdata.append('keyword', keyword)\n      formdata.append('lang_id', this.itemlangId2)\n      if (!this.keyword) {\n        formdata.append('defaultpageid', page_id)\n      }\n      const { data: res } = await this.$http.post(url, formdata)\n      if (res.status === 200) {\n        // loading.close()\n        var json = res.data\n        if (json.defaultpageid <= 0 || json.defaultpageid === undefined) {\n          if (json.menu.pages[0]) {\n            json.defaultpageid = String(json.menu.pages[0].ID)\n          }\n        }\n        this.item_info = json\n        this.itemtitle = json.itemtitle\n        this.access = res.access\n        if (json.unread_count > 0) {\n          this.$message({\n            showClose: true,\n            duration: 10000,\n            dangerouslyUseHTMLString: true,\n            message: '<a href=\"#/notice/index\">你有新的未读消息，点击查看</a>'\n          })\n        }\n        document.title =this.itemtitle +'--Doc'\n      } else if (res.status === 10307) {\n        // 需要输入密码\n        this.$router.replace({\n          path: '/item/password/' + item_id,\n          query: { page_id: page_id, redirect: this.$router.currentRoute.fullPath }\n        })\n      } else {\n        this.$alert(res.message)\n      }\n      // 设置一个最长关闭时间\n      setTimeout(() => {\n        // loading.close()\n      }, 10000)\n    },\n    search_item (keyword) {\n      this.item_info = ''\n      this.$store.dispatch('changeItemInfo', '')\n      this.keyword = keyword\n      this.get_item_menu(keyword)\n    },\n    loadConfig () {\n      var item_id = this.$route.params.item_id ? this.$route.params.item_id : 0\n      var that = this\n      var url = DocConfig.server + '/adminSetting/loadLangConfig'\n      var params = new URLSearchParams()\n      params.append('id', item_id)\n      that.$http.post(url, params).then(function (response) {\n        if (response.data.status === 200) {\n          if (response.data.data.length === 0) {\n            return\n          }\n          that.itemlangId2 = 0\n        } else {\n          this.$alert(response.data.message)\n        }\n      })\n        .catch(function (error) {\n          console.log(error)\n        })\n    }\n  },\n  mounted () {\n    // defaultlang 是全局语言\n    this.itemlangId2 = localStorage.getItem(\"defaultlang\")\n    this.loadConfig()\n    this.get_item_menu(this.keyword)\n    this.$store.dispatch('changeOpenCatId', 0)\n    this.$cookies.remove('selected')\n    localStorage.removeItem('defaultlang')\n  },\n  beforeDestroy () {\n    this.$message.closeAll()\n    document.title ='Doc'\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n</style>\n"]}]}