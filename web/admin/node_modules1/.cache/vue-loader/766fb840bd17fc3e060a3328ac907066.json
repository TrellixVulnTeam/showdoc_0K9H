{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/export/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/export/Index.vue","mtime":1627263191616},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0YWxvZ3M6IFtdLAogICAgICBjYXRfaWQ6ICcnLAogICAgICBleHBvcnRfdHlwZTogJzEnLAogICAgICBpdGVtX2lkOiAwLAogICAgICBleHBvcnRfZm9ybWF0OiAnbWFya2Rvd24nLAogICAgICBwYWdlczogW3sKICAgICAgICBJRDogJzAnLAogICAgICAgIHBhZ2V0aXRsZTogdGhpcy4kdCgnYWxsX3BhZ2VzJykKICAgICAgfV0sCiAgICAgIElEOiAnMCcKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDmlrDlu7ov57yW6L6R6aG16Z2i5pe25L6b55So5oi36YCJ5oup55qE5b2S5bGe55uu5b2V5YiX6KGoCiAgICBjb21wdXRlZF9jYXRhbG9nczogZnVuY3Rpb24gKCkgewogICAgICB2YXIgSW5mbyA9IHRoaXMuY2F0YWxvZ3Muc2xpY2UoMCkKICAgICAgdmFyIGNhdF9hcnJheSA9IFtdCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgSW5mby5sZW5ndGg7IGkrKykgewogICAgICAgIGNhdF9hcnJheS5wdXNoKEluZm9baV0pCiAgICAgICAgdmFyIHN1YiA9IEluZm9baV0uc3ViCgogICAgICAgIGlmIChzdWIgIT09IG51bGwpIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3ViLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNhdF9hcnJheS5wdXNoKHsKICAgICAgICAgICAgICBjYXRfaWQ6IHN1YltqXS5jYXRfaWQsCiAgICAgICAgICAgICAgY2F0X25hbWU6IEluZm9baV0uY2F0X25hbWUgKyAnIC8gJyArIHN1YltqXS5jYXRfbmFtZQogICAgICAgICAgICB9KQogICAgICAgICAgICB2YXIgc3ViX3N1YiA9IHN1YltqXS5zdWIKICAgICAgICAgICAgaWYgKHN1Yl9zdWIgIT09IG51bGwpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHN1Yl9zdWIubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgIGNhdF9hcnJheS5wdXNoKHsKICAgICAgICAgICAgICAgICAgY2F0X2lkOiBzdWJfc3ViW2tdLmNhdF9pZCwKICAgICAgICAgICAgICAgICAgY2F0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgSW5mb1tpXS5jYXRfbmFtZSArCiAgICAgICAgICAgICAgICAgICAgJyAvICcgKwogICAgICAgICAgICAgICAgICAgIHN1YltqXS5jYXRfbmFtZSArCiAgICAgICAgICAgICAgICAgICAgJyAvICcgKwogICAgICAgICAgICAgICAgICAgIHN1Yl9zdWJba10uY2F0X25hbWUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBub19jYXQgPSB7IGNhdF9pZDogJycsIGNhdF9uYW1lOiB0aGlzLiR0KCdub25lJykgfQogICAgICBjYXRfYXJyYXkudW5zaGlmdChub19jYXQpCiAgICAgIHJldHVybiBjYXRfYXJyYXkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaJgOacieebruW9lQogICAgZ2V0X2NhdGFsb2cgKGl0ZW1faWQpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9jYXRMaXN0R3JvdXAnCiAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgcGFyYW1zLmFwcGVuZCgnaXRlbV9pZCcsIGl0ZW1faWQpCiAgICAgIHRoYXQuJGh0dHAKICAgICAgICAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciBJbmZvID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgIHRoYXQuY2F0YWxvZ3MgPSBJbmZvCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgb25TdWJtaXQgKCkgewogICAgICBpZiAodGhpcy5leHBvcnRfdHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMuY2F0X2lkID0gJycKICAgICAgfQogICAgICB2YXIgdXJsID0KICAgICAgICBEb2NDb25maWcuc2VydmVyICsKICAgICAgICAnL2V4cG9ydC93b3JkP2l0ZW1faWQ9JyArCiAgICAgICAgdGhpcy5pdGVtX2lkICsKICAgICAgICAnJmNhdF9pZD0nICsKICAgICAgICB0aGlzLmNhdF9pZCArICcmcGFnZV9pZD0nICsgdGhpcy5JRAogICAgICBpZiAodGhpcy5leHBvcnRfZm9ybWF0ID09PSAnbWFya2Rvd24nKSB7CiAgICAgICAgdXJsID0gRG9jQ29uZmlnLnNlcnZlciArICcvZXhwb3J0L21hcmtkb3duLycgKyB0aGlzLml0ZW1faWQKICAgICAgfQogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybAogICAgfSwKICAgIGdvYmFjayAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgIH0sCiAgICAvLyDojrflj5bmn5Dnm67lvZXkuIvnmoTmiYDmnInpobXpnaIKICAgIGdldF9wYWdlcyAoY2F0X2lkKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICB2YXIgdXJsID0gRG9jQ29uZmlnLnNlcnZlciArICcvY2F0YWxvZy9nZXRQYWdlc0J5Y2F0JwogICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2l0ZW1faWQnLCB0aGlzLml0ZW1faWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2NhdF9pZCcsIGNhdF9pZCkKICAgICAgdGhhdC4kaHR0cAogICAgICAgIC5wb3N0KHVybCwgcGFyYW1zKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIHBhZ2VzID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgIHBhZ2VzLnVuc2hpZnQoewogICAgICAgICAgICAgIElEOiAnMCcsCiAgICAgICAgICAgICAgcGFnZXRpdGxlOiB0aGF0LiR0KCdhbGxfcGFnZXMnKQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGF0LnBhZ2VzID0gcGFnZXMKICAgICAgICAgICAgdGhhdC5JRCA9ICcwJwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC4kYWxlcnQocmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuZ2V0X2NhdGFsb2codGhpcy4kcm91dGUucGFyYW1zLml0ZW1faWQpCiAgICB0aGlzLml0ZW1faWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaXRlbV9pZAogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7fQp9Cg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/item/export","sourcesContent":["<template>\n  <div class=\"hello\">\n    <Header></Header>\n\n    <el-container>\n      <el-card class=\"center-card\">\n        <el-form status-icon label-width=\"0px\" class=\"demo-ruleForm\">\n          <h2></h2>\n          <el-form-item label>\n            <el-radio-group v-model=\"export_format\">\n              <el-radio-button label=\"word\" disabled>{{$t('export_format_word')}}</el-radio-button>\n              <el-radio-button label=\"markdown\">{{$t('export_format_markdown')}}</el-radio-button>\n            </el-radio-group>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'word'\">\n            <el-radio v-model=\"export_type\" label=\"1\">{{$t('export_all')}}</el-radio>\n            <el-radio v-model=\"export_type\" label=\"2\">{{$t('export_cat')}}</el-radio>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'markdown'\">\n            <p class=\"markdown-tips\">{{$t('export_markdown_tips')}}</p>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'word' && export_type == 2\">\n            <el-select\n              :placeholder=\"$t('catalog')\"\n              class=\"cat\"\n              v-model=\"cat_id\"\n              v-if=\"computed_catalogs\"\n              @change=\"get_pages\"\n            >\n              <el-option\n                v-for=\"cat in computed_catalogs \"\n                :key=\"cat.cat_name\"\n                :label=\"cat.cat_name\"\n                :value=\"cat.cat_id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label v-if=\"export_format == 'word' && export_type == 2\">\n            <el-select class=\"cat\" v-model=\"page_id\" v-if=\"pages\">\n              <el-option\n                v-for=\"page in pages \"\n                :key=\"page.pagetitle\"\n                :label=\"page.pagetitle\"\n                :value=\"page.ID\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label>\n            <el-button type=\"primary\" style=\"width:100%;\" @click=\"onSubmit\">{{$t('begin_export')}}</el-button>\n          </el-form-item>\n\n          <el-form-item label>\n            <el-button type=\"text\" @click=\"goback\" class=\"goback-btn\">{{$t('goback')}}</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </el-container>\n\n    <Footer></Footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  components: {},\n  data () {\n    return {\n      catalogs: [],\n      cat_id: '',\n      export_type: '1',\n      item_id: 0,\n      export_format: 'markdown',\n      pages: [{\n        ID: '0',\n        pagetitle: this.$t('all_pages')\n      }],\n      ID: '0'\n    }\n  },\n  computed: {\n    // 新建/编辑页面时供用户选择的归属目录列表\n    computed_catalogs: function () {\n      var Info = this.catalogs.slice(0)\n      var cat_array = []\n      for (var i = 0; i < Info.length; i++) {\n        cat_array.push(Info[i])\n        var sub = Info[i].sub\n\n        if (sub !== null) {\n          for (var j = 0; j < sub.length; j++) {\n            cat_array.push({\n              cat_id: sub[j].cat_id,\n              cat_name: Info[i].cat_name + ' / ' + sub[j].cat_name\n            })\n            var sub_sub = sub[j].sub\n            if (sub_sub !== null) {\n              for (var k = 0; k < sub_sub.length; k++) {\n                cat_array.push({\n                  cat_id: sub_sub[k].cat_id,\n                  cat_name:\n                    Info[i].cat_name +\n                    ' / ' +\n                    sub[j].cat_name +\n                    ' / ' +\n                    sub_sub[k].cat_name\n                })\n              }\n            }\n          }\n        }\n      }\n      var no_cat = { cat_id: '', cat_name: this.$t('none') }\n      cat_array.unshift(no_cat)\n      return cat_array\n    }\n  },\n  methods: {\n    // 获取所有目录\n    get_catalog (item_id) {\n      var that = this\n      var url = DocConfig.server + '/catListGroup'\n      var params = new URLSearchParams()\n      params.append('item_id', item_id)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var Info = response.data.data\n            that.catalogs = Info\n          } else {\n            that.$message(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    onSubmit () {\n      if (this.export_type === 1) {\n        this.cat_id = ''\n      }\n      var url =\n        DocConfig.server +\n        '/export/word?item_id=' +\n        this.item_id +\n        '&cat_id=' +\n        this.cat_id + '&page_id=' + this.ID\n      if (this.export_format === 'markdown') {\n        url = DocConfig.server + '/export/markdown/' + this.item_id\n      }\n      window.location.href = url\n    },\n    goback () {\n      this.$router.go(-1)\n    },\n    // 获取某目录下的所有页面\n    get_pages (cat_id) {\n      var that = this\n      var url = DocConfig.server + '/catalog/getPagesBycat'\n      var params = new URLSearchParams()\n      params.append('item_id', this.item_id)\n      params.append('cat_id', cat_id)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var pages = response.data.data\n            pages.unshift({\n              ID: '0',\n              pagetitle: that.$t('all_pages')\n            })\n            that.pages = pages\n            that.ID = '0'\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n    }\n  },\n  mounted () {\n    this.get_catalog(this.$route.params.item_id)\n    this.item_id = this.$route.params.item_id\n  },\n  beforeDestroy () {}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.center-card a {\n  font-size: 12px;\n}\n.center-card {\n  text-align: center;\n  width: 400px;\n}\n.markdown-tips {\n  text-align: left;\n  margin-left: 25px;\n  font-size: 12px;\n}\n</style>\n"]}]}