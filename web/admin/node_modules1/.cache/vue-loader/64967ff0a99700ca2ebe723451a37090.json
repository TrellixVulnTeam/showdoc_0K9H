{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/edit/Filehub.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/edit/Filehub.vue","mtime":1617016476672},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY2FsbGJhY2s6IHt9LAogICAgcGFnZV9pZDoge30sCiAgICBpdGVtX2lkOiB7fSwKICAgIG1hbmFnZToge30KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nVGFibGVWaXNpYmxlOiBmYWxzZSwKICAgICAgcGFnZTogMSwKICAgICAgY291bnQ6IDUsCiAgICAgIGRpc3BsYXlfbmFtZTogJycsCiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgZGF0YUxpc3Q6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgcG9zaXRpdmVfdHlwZTogJzEnLAogICAgICBhdHRhY2htZW50X3R5cGU6ICctMScsCiAgICAgIHVzZWQ6IDAsCiAgICAgIHVzZWRfZmxvdzogMCwKICAgICAgdXBsb2FkVXJsOiB0aGlzLkRvY0NvbmZpZy5zZXJ2ZXIgKyAnL2FwaS9wYWdlL3VwbG9hZCcKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiB7CiAgICB1cGxvYWREYXRhOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGFnZV9pZDogdGhpcy5wYWdlX2lkLAogICAgICAgIGl0ZW1faWQ6IHRoaXMuaXRlbV9pZAogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0ICgpIHsKICAgICAgdGhpcy5yZXF1ZXN0KCcvYXBpL2F0dGFjaG1lbnQvZ2V0TXlMaXN0JywgewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBjb3VudDogdGhpcy5jb3VudCwKICAgICAgICBhdHRhY2htZW50X3R5cGU6IHRoaXMuYXR0YWNobWVudF90eXBlLAogICAgICAgIGRpc3BsYXlfbmFtZTogdGhpcy5kaXNwbGF5X25hbWUsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUKICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICB2YXIganNvbiA9IGRhdGEuZGF0YQogICAgICAgIHRoaXMuZGF0YUxpc3QgPSBqc29uLmxpc3QKICAgICAgICB0aGlzLnRvdGFsID0gcGFyc2VJbnQoanNvbi50b3RhbCkKICAgICAgICB0aGlzLnVzZWQgPSBqc29uLnVzZWRfbQogICAgICAgIHRoaXMudXNlZF9mbG93ID0ganNvbi51c2VkX2Zsb3dfbQogICAgICB9KQogICAgfSwKICAgIHNob3cgKCkgewogICAgICB0aGlzLmRpYWxvZ1RhYmxlVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlIChjdXJyZW50UGFnZSkgewogICAgICB0aGlzLnBhZ2UgPSBjdXJyZW50UGFnZQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIG9uU3VibWl0ICgpIHsKICAgICAgdGhpcy5wYWdlID0gMQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIHZpc2l0IChyb3cpIHsKICAgICAgd2luZG93Lm9wZW4ocm93LnVybCkKICAgIH0sCiAgICBkZWxldGVfcm93IChyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSh0aGlzLiR0KCdjb25maXJtX2RlbGV0ZScpLCAnICcsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogdGhpcy4kdCgnY29uZmlybScpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoJ2NhbmNlbCcpLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLnJlcXVlc3QoJy9hcGkvYXR0YWNobWVudC9kZWxldGVNeUF0dGFjaG1lbnQnLCB7CiAgICAgICAgICBmaWxlX2lkOiByb3cuZmlsZV9pZAogICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3ModGhpcy4kdCgnb3Bfc3VjY2VzcycpKQogICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHVwbG9hZENhbGxiYWNrIChkYXRhKSB7CiAgICAgIGlmIChkYXRhLmVycm9yX21lc3NhZ2UpIHsKICAgICAgICB0aGlzLiRhbGVydChkYXRhLmVycm9yX21lc3NhZ2UpCiAgICAgIH0KICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLnVwbG9hZEZpbGUgLy8g6I635Y+W5a2Q57uE5Lu2CiAgICAgIGNoaWxkUmVmLmNsZWFyRmlsZXMoKQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIHNlbGVjdCAocm93KSB7CiAgICAgIHRoaXMucmVxdWVzdCgnL2FwaS9hdHRhY2htZW50L2JpbmRpbmdQYWdlJywgewogICAgICAgIGZpbGVfaWQ6IHJvdy5maWxlX2lkLAogICAgICAgIHBhZ2VfaWQ6IHRoaXMucGFnZV9pZAogICAgICB9KS50aGVuKGRhdGEgPT4gewogICAgICAgIHRoaXMuZGlhbG9nVGFibGVWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLmNhbGxiYWNrKCkKICAgICAgfSkKICAgIH0KICB9LAogIG1vdW50ZWQgKCkge30KfQo="},{"version":3,"sources":["Filehub.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Filehub.vue","sourceRoot":"src/components/page/edit","sourcesContent":["<template>\n  <div class=\"hello\">\n    <Header></Header>\n\n    <el-container class=\"container-narrow\">\n      <el-dialog\n        :title=\"$t('file_gub')\"\n        :visible.sync=\"dialogTableVisible\"\n        :close-on-click-modal=\"false\"\n        width=\"65%\"\n      >\n        <el-form :inline=\"true\" class=\"demo-form-inline\">\n          <el-form-item label>\n            <el-input v-model=\"display_name\" :placeholder=\"$t('display_name')\"></el-input>\n          </el-form-item>\n          <el-form-item label>\n            <el-select v-model=\"attachment_type\" placeholder>\n              <el-option :label=\"$t('all_attachment_type')\" value=\"-1\"></el-option>\n              <el-option :label=\"$t('image')\" value=\"1\"></el-option>\n              <el-option :label=\"$t('general_attachment')\" value=\"2\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"onSubmit\">{{$t('search')}}</el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-upload\n              class=\"upload-file\"\n              :action=\"uploadUrl\"\n              :on-success=\"uploadCallback\"\n              :on-error=\"uploadCallback\"\n              ref=\"uploadFile\"\n            >\n              <el-button>{{$t('upload')}}</el-button>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <P>{{$t('accumulated_used_sapce')}} {{used}}M , {{$t('month_flow')}} {{used_flow}}M</P>\n        <el-table :data=\"dataList\" style=\"width: 100%\">\n          <el-table-column prop=\"file_id\" :label=\"$t('file_id')\"></el-table-column>\n          <el-table-column prop=\"display_name\" :label=\"$t('display_name')\"></el-table-column>\n          <el-table-column prop=\"file_type\" :label=\"$t('file_type')\" width=\"160\"></el-table-column>\n          <el-table-column prop=\"file_size_m\" :label=\"$t('file_size_m')\" width=\"160\"></el-table-column>\n          <el-table-column prop=\"visit_times\" :label=\"$t('visit_times')\"></el-table-column>\n          <el-table-column prop=\"addtime\" :label=\"$t('add_time')\" width=\"160\"></el-table-column>\n          <el-table-column prop :label=\"$t('operation')\">\n            <template slot-scope=\"scope\">\n              <el-button @click=\"select(scope.row)\" type=\"text\" size=\"small\">{{$t('select')}}</el-button>\n              <el-button @click=\"visit(scope.row)\" type=\"text\" size=\"small\">{{$t('visit')}}</el-button>\n              <el-button @click=\"delete_row(scope.row)\" type=\"text\" size=\"small\">{{$t('delete')}}</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <div class=\"block\">\n          <span class=\"demonstration\"></span>\n          <el-pagination\n            @current-change=\"handleCurrentChange\"\n            :page-size=\"count\"\n            layout=\"total, prev, pager, next\"\n            :total=\"total\"\n          ></el-pagination>\n        </div>\n      </el-dialog>\n    </el-container>\n    <Footer></Footer>\n    <div class></div>\n  </div>\n</template>\n\n<style>\n</style>\n\n<script>\nexport default {\n  props: {\n    callback: {},\n    page_id: {},\n    item_id: {},\n    manage: {}\n  },\n  data () {\n    return {\n      dialogTableVisible: false,\n      page: 1,\n      count: 5,\n      display_name: '',\n      username: '',\n      dataList: [],\n      total: 0,\n      positive_type: '1',\n      attachment_type: '-1',\n      used: 0,\n      used_flow: 0,\n      uploadUrl: this.DocConfig.server + '/api/page/upload'\n    }\n  },\n  components: {},\n  computed: {\n    uploadData: function () {\n      return {\n        page_id: this.page_id,\n        item_id: this.item_id\n      }\n    }\n  },\n  methods: {\n    getList () {\n      this.request('/api/attachment/getMyList', {\n        page: this.page,\n        count: this.count,\n        attachment_type: this.attachment_type,\n        display_name: this.display_name,\n        username: this.username\n      }).then(data => {\n        var json = data.data\n        this.dataList = json.list\n        this.total = parseInt(json.total)\n        this.used = json.used_m\n        this.used_flow = json.used_flow_m\n      })\n    },\n    show () {\n      this.dialogTableVisible = true\n      this.getList()\n    },\n    handleCurrentChange (currentPage) {\n      this.page = currentPage\n      this.getList()\n    },\n    onSubmit () {\n      this.page = 1\n      this.getList()\n    },\n    visit (row) {\n      window.open(row.url)\n    },\n    delete_row (row) {\n      this.$confirm(this.$t('confirm_delete'), ' ', {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.request('/api/attachment/deleteMyAttachment', {\n          file_id: row.file_id\n        }).then(data => {\n          this.$message.success(this.$t('op_success'))\n          this.getList()\n        })\n      })\n    },\n    uploadCallback (data) {\n      if (data.error_message) {\n        this.$alert(data.error_message)\n      }\n      const childRef = this.$refs.uploadFile // 获取子组件\n      childRef.clearFiles()\n      this.getList()\n    },\n    select (row) {\n      this.request('/api/attachment/bindingPage', {\n        file_id: row.file_id,\n        page_id: this.page_id\n      }).then(data => {\n        this.dialogTableVisible = false\n        this.callback()\n      })\n    }\n  },\n  mounted () {}\n}\n</script>\n"]}]}