{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/admin/setting/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/admin/setting/Index.vue","mtime":1619574663464},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICByZWdpc3Rlcl9vcGVuOiB0cnVlLAogICAgICAgIGxkYXBfb3BlbjogZmFsc2UsCiAgICAgICAgaG9tZV9wYWdlOiAnMScsCiAgICAgICAgbGRhcF9mb3JtOiB7CiAgICAgICAgICBob3N0OiAnJywKICAgICAgICAgIHBvcnQ6ICczODknLAogICAgICAgICAgdmVyc2lvbjogJzMnLAogICAgICAgICAgYmFzZV9kbjogJycsCiAgICAgICAgICBiaW5kX2RuOiAnJywKICAgICAgICAgIGJpbmRfcGFzc3dvcmQ6ICcnLAogICAgICAgICAgdXNlcl9maWVsZDogJycKICAgICAgICB9LAogICAgICAgIGhvbWVfaXRlbTogJycsCiAgICAgICAgb3NzX29wZW46IGZhbHNlLAogICAgICAgIG9zc19zZXR0aW5nOiB7CiAgICAgICAgICBvc3NfdHlwZTogJ2FsaXl1bicsCiAgICAgICAgICBrZXk6ICcnLAogICAgICAgICAgc2VjcmV0OiAnJywKICAgICAgICAgIGVuZHBvaW50OiAnJywKICAgICAgICAgIGJ1Y2tldDogJycsCiAgICAgICAgICBwcm90b2NvbDogJ2h0dHAnLAogICAgICAgICAgZG9tYWluOiAnJwogICAgICAgIH0KICAgICAgfSwKICAgICAgaXRlbUxpc3Q6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdCAoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICB2YXIgdXJsID0gdGhpcy5Eb2NDb25maWcuc2VydmVyICsgJy9hZG1pblNldHRpbmcvc2F2ZUNvbmZpZycKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdyZWdpc3Rlcl9vcGVuJywgdGhhdC5mb3JtLnJlZ2lzdGVyX29wZW4pCiAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCfmiJDlip8nKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGF0LiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGxvYWRDb25maWcgKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IHRoaXMuRG9jQ29uZmlnLnNlcnZlciArICcvYWRtaW5TZXR0aW5nL2xvYWRDb25maWcnCiAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgdGhhdC4kaHR0cC5nZXQodXJsLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgdGhhdC5mb3JtLnJlZ2lzdGVyX29wZW4gPSByZXNwb25zZS5kYXRhLmRhdGFbMF0ub3B0aW9uVmFsdWUgPT09ICd0cnVlJwogICAgICAgICAgdGhpcy5mb3JtLm9zc19vcGVuID0gcmVzcG9uc2UuZGF0YS5kYXRhLm9zc19vcGVuID4gMAogICAgICAgICAgdGhpcy5mb3JtLmxkYXBfb3BlbiA9IHJlc3BvbnNlLmRhdGEuZGF0YS5sZGFwX29wZW4gPiAwCiAgICAgICAgICB0aGlzLmZvcm0uaG9tZV9wYWdlID0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLmhvbWVfcGFnZSA+IDAgPyByZXNwb25zZS5kYXRhLmRhdGEuaG9tZV9wYWdlIDogMQogICAgICAgICAgdGhpcy5mb3JtLmhvbWVfaXRlbSA9CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YS5ob21lX2l0ZW0gPiAwID8gcmVzcG9uc2UuZGF0YS5kYXRhLmhvbWVfaXRlbSA6ICcnCiAgICAgICAgICB0aGlzLmZvcm0ubGRhcF9mb3JtID0gcmVzcG9uc2UuZGF0YS5kYXRhLmxkYXBfZm9ybQogICAgICAgICAgICA/IHJlc3BvbnNlLmRhdGEuZGF0YS5sZGFwX2Zvcm0KICAgICAgICAgICAgOiB0aGlzLmZvcm0ubGRhcF9mb3JtCiAgICAgICAgICB0aGlzLmZvcm0ub3NzX3NldHRpbmcgPSByZXNwb25zZS5kYXRhLmRhdGEub3NzX3NldHRpbmcKICAgICAgICAgICAgPyByZXNwb25zZS5kYXRhLmRhdGEub3NzX3NldHRpbmcKICAgICAgICAgICAgOiB0aGlzLmZvcm0ub3NzX3NldHRpbmcKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kYWxlcnQocmVzcG9uc2UuZGF0YS5lcnJvcl9tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnZXRfaXRlbV9saXN0ICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSB0aGlzLkRvY0NvbmZpZy5zZXJ2ZXIgKyAnL2FkbWluSXRlbS9nZXRMaXN0JwogICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ3BhZ2UnLCAxKQogICAgICBwYXJhbXMuYXBwZW5kKCdjb3VudCcsIDEwMDApCiAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgLy8gdGhhdC4kbWVzc2FnZS5zdWNjZXNzKCLliqDovb3miJDlip8iKTsKICAgICAgICAgIHZhciBqc29uID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICB0aGF0Lml0ZW1MaXN0ID0ganNvbgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGF0LiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLmdldF9pdGVtX2xpc3QoKQogICAgdGhpcy5sb2FkQ29uZmlnKCkKICB9LAogIGJlZm9yZURlc3Ryb3kgKCkgewogICAgdGhpcy4kbWVzc2FnZS5jbG9zZUFsbCgpCiAgfQp9Cg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/admin/setting","sourcesContent":["<template>\n  <div class=\"hello\">\n    <el-form ref=\"form\" :model=\"form\" label-width=\"150px\">\n      <el-form-item :label=\"$t('register_open')\">\n        <el-switch v-model=\"form.register_open\"></el-switch>\n      </el-form-item>\n      <!-- 待支持\n      <el-form-item label=\"所有人可以新建项目\">\n        <el-switch v-model=\"form.register_open\"></el-switch>\n      </el-form-item>\n      -->\n      <el-form-item :label=\"$t('home_page')\">\n        <el-select v-model=\"form.home_page\" :placeholder=\"$t('please_choose')\" disabled>\n          <el-option :label=\"$t('full_page')\" value=\"1\"></el-option>\n          <el-option :label=\"$t('login_page')\" value=\"2\"></el-option>\n          <el-option :label=\"$t('jump_to_an_item')\" value=\"3\"></el-option>\n          <!-- <el-option label=\"展示全站项目\" value=\"4\"></el-option> -->\n        </el-select>\n      </el-form-item>\n\n      <el-form-item :label=\"$t('jump_to_item')\" v-show=\"form.home_page == 3\">\n        <el-select v-model=\"form.home_item\" :placeholder=\"$t('please_choose')\">\n          <el-option\n            v-for=\"item in itemList\"\n            :label=\"item.item_name\"\n            :value=\"item.item_id\"\n            :key=\"item.item_id\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item :label=\"$t('ldap_open_label')\">\n        <el-switch v-model=\"form.ldap_open\" disabled></el-switch>\n      </el-form-item>\n\n      <div v-if=\"form.ldap_open\" style=\"margin-left:50px\">\n        <el-form-item label=\"ldap host\">\n          <el-input v-model=\"form.ldap_form.host\" class=\"form-el\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"ldap port\">\n          <el-input v-model=\"form.ldap_form.port\" style=\"width:90px\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"ldap base dn \">\n          <el-input\n            v-model=\"form.ldap_form.base_dn\"\n            class=\"form-el\"\n            placeholder=\"例如 dc=doc,dc=com\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"ldap bind dn \">\n          <el-input\n            v-model=\"form.ldap_form.bind_dn\"\n            class=\"form-el\"\n            placeholder=\"cn=admin,dc=doc,dc=com\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"ldap bind password \">\n          <el-input v-model=\"form.ldap_form.bind_password\" class=\"form-el\" placeholder=\"例如 123456\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"ldap version\">\n          <el-select v-model=\"form.ldap_form.version\" class=\"form-el\">\n            <el-option label=\"3\" value=\"3\"></el-option>\n            <el-option label=\"2\" value=\"2\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"ldap user filed\">\n          <el-input\n            v-model=\"form.ldap_form.user_field\"\n            class=\"form-el\"\n            placeholder=\"例如 cn 或者 sAMAccountName\"\n          ></el-input>\n        </el-form-item>\n      </div>\n\n      <el-form-item :label=\"$t('oss_open')\">\n        <el-switch v-model=\"form.oss_open\" disabled></el-switch>\n      </el-form-item>\n\n      <div v-if=\"form.oss_open\" style=\"margin-left:50px\">\n        <el-form-item :label=\"$t('oss_server')\">\n          <el-select v-model=\"form.oss_setting.oss_type\">\n            <el-option :label=\"$t('aliyun')\" value=\"aliyun\"></el-option>\n            <el-option :label=\"$t('qiniu')\" value=\"qiniu\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"key\">\n          <el-input v-model=\"form.oss_setting.key\" class=\"form-el\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"secret\">\n          <el-input v-model=\"form.oss_setting.secret\" class=\"form-el\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"endpoint\" v-if=\"form.oss_setting.oss_type == 'aliyun'\">\n          <el-input v-model=\"form.oss_setting.endpoint\" class=\"form-el\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"bucket\">\n          <el-input v-model=\"form.oss_setting.bucket\" class=\"form-el\"></el-input>\n        </el-form-item>\n\n        <el-form-item :label=\"$t('oss_domain')\">\n          <el-select v-model=\"form.oss_setting.protocol\" style=\"width:100px;\">\n            <el-option label=\"http://\" value=\"http\"></el-option>\n            <el-option label=\"https://\" value=\"https\"></el-option>\n          </el-select>\n          <el-input v-model=\"form.oss_setting.domain\" class=\"form-el\"></el-input>\n        </el-form-item>\n      </div>\n\n      <br />\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"onSubmit\">{{$t('save')}}</el-button>\n        <el-button><router-link to=\"/item/index\">{{$t('cancel')}}</router-link></el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<style scoped>\n.form-el {\n  width: 230px;\n}\n</style>\n\n<script>\nexport default {\n  data () {\n    return {\n      form: {\n        register_open: true,\n        ldap_open: false,\n        home_page: '1',\n        ldap_form: {\n          host: '',\n          port: '389',\n          version: '3',\n          base_dn: '',\n          bind_dn: '',\n          bind_password: '',\n          user_field: ''\n        },\n        home_item: '',\n        oss_open: false,\n        oss_setting: {\n          oss_type: 'aliyun',\n          key: '',\n          secret: '',\n          endpoint: '',\n          bucket: '',\n          protocol: 'http',\n          domain: ''\n        }\n      },\n      itemList: []\n    }\n  },\n  methods: {\n    onSubmit () {\n      var that = this\n      var url = this.DocConfig.server + '/adminSetting/saveConfig'\n      var params = new URLSearchParams()\n      params.append('register_open', that.form.register_open)\n      that.$http.post(url, params).then(function (response) {\n        if (response.data.status === 200) {\n          that.$message.success('成功')\n        } else {\n          that.$alert(response.data.message)\n        }\n      })\n    },\n    loadConfig () {\n      var that = this\n      var url = this.DocConfig.server + '/adminSetting/loadConfig'\n      var params = new URLSearchParams()\n      that.$http.get(url, params).then(function (response) {\n        if (response.data.status === 200) {\n          if (response.data.data.length === 0) {\n            return\n          }\n          that.form.register_open = response.data.data[0].optionValue === 'true'\n          this.form.oss_open = response.data.data.oss_open > 0\n          this.form.ldap_open = response.data.data.ldap_open > 0\n          this.form.home_page =\n            response.data.data.home_page > 0 ? response.data.data.home_page : 1\n          this.form.home_item =\n            response.data.data.home_item > 0 ? response.data.data.home_item : ''\n          this.form.ldap_form = response.data.data.ldap_form\n            ? response.data.data.ldap_form\n            : this.form.ldap_form\n          this.form.oss_setting = response.data.data.oss_setting\n            ? response.data.data.oss_setting\n            : this.form.oss_setting\n        } else {\n          this.$alert(response.data.error_message)\n        }\n      })\n    },\n    get_item_list () {\n      var that = this\n      var url = this.DocConfig.server + '/adminItem/getList'\n      var params = new URLSearchParams()\n      params.append('page', 1)\n      params.append('count', 1000)\n      that.$http.post(url, params).then(function (response) {\n        if (response.data.status === 200) {\n          // that.$message.success(\"加载成功\");\n          var json = response.data.data\n          that.itemList = json\n        } else {\n          that.$alert(response.data.message)\n        }\n      })\n    }\n  },\n  mounted () {\n    this.get_item_list()\n    this.loadConfig()\n  },\n  beforeDestroy () {\n    this.$message.closeAll()\n  }\n}\n</script>\n"]}]}