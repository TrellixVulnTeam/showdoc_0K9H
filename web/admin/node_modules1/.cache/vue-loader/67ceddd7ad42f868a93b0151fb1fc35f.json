{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/Diff.vue?vue&type=style&index=0&id=5a8edd83&scoped=true&lang=css&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/Diff.vue","mtime":1624869253392},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKLnRvcCB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci50ZXh0SW5wdXQgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiA0OSU7CiAgZmxvYXQ6IGxlZnQ7CiAgZGlzcGxheTogbm9uZTsKfQp0ZXh0YXJlYSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAzMDBweDsKfQpsYWJlbDpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci5zcGFjZXIgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9Ci52aWV3VHlwZSB7CiAgZm9udC1zaXplOiAxNnB4OwogIGNsZWFyOiBib3RoOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxZW07Cn0KI2RpZmZvdXRwdXQgewogIG1hcmdpbjogMCBhdXRvOwp9Cg=="},{"version":3,"sources":["Diff.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Diff.vue","sourceRoot":"src/components/page","sourcesContent":["<!-- 更多模板 -->\n<template>\n  <div class=\"hello\">\n    <Header></Header>\n    <link href=\"static/diff/diffview.css\" rel=\"stylesheet\" />\n    <el-container class=\"container-narrow\">\n      <div class=\"textInput\">\n        <textarea id=\"baseText\" v-html=\"content\" style=\"display:none;\"></textarea>\n      </div>\n      <div class=\"textInput spacer\">\n        <textarea id=\"newText\" v-html=\"historyContent\" style=\"display:none;\"></textarea>\n      </div>\n\n      <div id=\"diffoutput\"></div>\n    </el-container>\n    <Footer></Footer>\n    <div class></div>\n  </div>\n</template>\n\n<style scoped>\n.top {\n  text-align: center;\n}\n.textInput {\n  display: block;\n  width: 49%;\n  float: left;\n  display: none;\n}\ntextarea {\n  width: 100%;\n  height: 300px;\n}\nlabel:hover {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.spacer {\n  margin-left: 10px;\n}\n.viewType {\n  font-size: 16px;\n  clear: both;\n  text-align: center;\n  padding: 1em;\n}\n#diffoutput {\n  margin: 0 auto;\n}\n</style>\n\n<script>\nif (typeof window !== 'undefined') {\n  var $s = require('scriptjs')\n}\nexport default {\n  props: {\n    callback: ''\n  },\n  data() {\n    return {\n      content: '',\n      historyContent: ''\n    }\n  },\n  components: {},\n  methods: {\n    get_content() {\n      var that = this\n      var url = DocConfig.server + '/page/diff'\n      var params = new URLSearchParams()\n      params.append('page_id', that.$route.params.page_id)\n      params.append('page_history_id', that.$route.params.page_history_id)\n      that.$http\n        .post(url, params)\n        .then(function(response) {\n          if (response.data.status === 200) {\n            var json = response.data.data\n            that.content = json.page.page_content\n            that.historyContent = json.history_page.page_content\n            that.$nextTick(() => {\n              that.diffUsingJS(0)\n            })\n          } else {\n            that.$alert(response.data.error_message)\n          }\n        })\n        .catch(function(error) {\n          console.log(error)\n        })\n    },\n    diffUsingJS(viewType) {\n      'use strict'\n      var that = this\n      // eslint-disable-next-line one-var\n      var byId = function(id) {\n          return document.getElementById(id)\n        },\n        base = difflib.stringAsLines(byId('baseText').value),\n        newtxt = difflib.stringAsLines(byId('newText').value),\n        sm = new difflib.SequenceMatcher(base, newtxt),\n        opcodes = sm.get_opcodes(),\n        diffoutputdiv = byId('diffoutput')\n      diffoutputdiv.innerHTML = ''\n      diffoutputdiv.appendChild(\n        diffview.buildView({\n          baseTextLines: base,\n          newTextLines: newtxt,\n          opcodes: opcodes,\n          baseTextName: that.$t('cur_page_content'),\n          newTextName: that.$t('history_version'),\n          viewType: viewType\n        })\n      )\n    }\n  },\n  mounted() {\n    $s([`static/diff/difflib.js`, `static/diff/diffview.js`], () => {\n      this.get_content()\n    })\n  },\n  beforeDestroy() {}\n}\n</script>\n"]}]}