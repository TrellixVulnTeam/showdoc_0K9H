{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/export/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/export/Index.vue","mtime":1617675679081},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0YWxvZ3M6IFtdLAogICAgICBjYXRfaWQ6ICcnLAogICAgICBleHBvcnRfdHlwZTogJzEnLAogICAgICBpdGVtX2lkOiAwLAogICAgICBleHBvcnRfZm9ybWF0OiAnd29yZCcsCiAgICAgIHBhZ2VzOiBbewogICAgICAgIHBhZ2VfaWQ6ICcwJywKICAgICAgICBwYWdlX3RpdGxlOiB0aGlzLiR0KCdhbGxfcGFnZXMnKQogICAgICB9XSwKICAgICAgcGFnZV9pZDogJzAnCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5paw5bu6L+e8lui+kemhtemdouaXtuS+m+eUqOaIt+mAieaLqeeahOW9kuWxnuebruW9leWIl+ihqAogICAgY29tcHV0ZWRfY2F0YWxvZ3M6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIEluZm8gPSB0aGlzLmNhdGFsb2dzLnNsaWNlKDApCiAgICAgIHZhciBjYXRfYXJyYXkgPSBbXQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEluZm8ubGVuZ3RoOyBpKyspIHsKICAgICAgICBjYXRfYXJyYXkucHVzaChJbmZvW2ldKQogICAgICAgIHZhciBzdWIgPSBJbmZvW2ldLnN1YgogICAgICAgIGlmIChzdWIubGVuZ3RoID4gMCkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdWIubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgY2F0X2FycmF5LnB1c2goewogICAgICAgICAgICAgIGNhdF9pZDogc3ViW2pdLklELAogICAgICAgICAgICAgIGNhdF9uYW1lOiBJbmZvW2ldLm5hbWUgKyAnIC8gJyArIHN1YltqXS5uYW1lCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHZhciBzdWJfc3ViID0gc3ViW2pdLnN1YgogICAgICAgICAgICBpZiAoc3ViX3N1Yi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzdWJfc3ViLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICBjYXRfYXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgICAgIGNhdF9pZDogc3ViX3N1YltrXS5JRCwKICAgICAgICAgICAgICAgICAgY2F0X25hbWU6CiAgICAgICAgICAgICAgICAgICAgSW5mb1tpXS5uYW1lICsKICAgICAgICAgICAgICAgICAgICAnIC8gJyArCiAgICAgICAgICAgICAgICAgICAgc3ViW2pdLm5hbWUgKwogICAgICAgICAgICAgICAgICAgICcgLyAnICsKICAgICAgICAgICAgICAgICAgICBzdWJfc3ViW2tdLm5hbWUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBub19jYXQgPSB7IGNhdF9pZDogJycsIGNhdF9uYW1lOiB0aGlzLiR0KCdub25lJykgfQogICAgICBjYXRfYXJyYXkudW5zaGlmdChub19jYXQpCiAgICAgIHJldHVybiBjYXRfYXJyYXkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaJgOacieebruW9lQogICAgZ2V0X2NhdGFsb2cgKGl0ZW1faWQpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSB0aGlzLkRvY0NvbmZpZy5zZXJ2ZXIgKyAnL2NhdExpc3RHcm91cCcKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdpdGVtX2lkJywgaXRlbV9pZCkKICAgICAgdGhhdC5heGlvcwogICAgICAgIC5wb3N0KHVybCwgcGFyYW1zKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIEluZm8gPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgdGhhdC5jYXRhbG9ncyA9IEluZm8KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQuJGFsZXJ0KHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgb25TdWJtaXQgKCkgewogICAgICBpZiAodGhpcy5leHBvcnRfdHlwZSA9PT0gMSkgewogICAgICAgIHRoaXMuY2F0X2lkID0gJycKICAgICAgfQogICAgICB2YXIgdXJsID0KICAgICAgICB0aGlzLkRvY0NvbmZpZy5zZXJ2ZXIgKwogICAgICAgICcvYXBpL2V4cG9ydC93b3JkJml0ZW1faWQ9JyArCiAgICAgICAgdGhpcy5pdGVtX2lkICsKICAgICAgICAnJmNhdF9pZD0nICsKICAgICAgICB0aGlzLmNhdF9pZCArICcmcGFnZV9pZD0nICsgdGhpcy5wYWdlX2lkCiAgICAgIGlmICh0aGlzLmV4cG9ydF9mb3JtYXQgPT09ICdtYXJrZG93bicpIHsKICAgICAgICB1cmwgPSB0aGlzLkRvY0NvbmZpZy5zZXJ2ZXIgKyAnL2FwaS9leHBvcnQvbWFya2Rvd24maXRlbV9pZD0nICsgdGhpcy5pdGVtX2lkCiAgICAgIH0KICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwKICAgIH0sCiAgICBnb2JhY2sgKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICB9LAogICAgLy8g6I635Y+W5p+Q55uu5b2V5LiL55qE5omA5pyJ6aG16Z2iCiAgICBnZXRfcGFnZXMgKGNhdF9pZCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IHRoaXMuRG9jQ29uZmlnLnNlcnZlciArICcvY2F0YWxvZy9nZXRQYWdlc0J5Y2F0JwogICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2l0ZW1faWQnLCB0aGlzLml0ZW1faWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2NhdF9pZCcsIGNhdF9pZCkKICAgICAgdGhhdC5heGlvcwogICAgICAgIC5wb3N0KHVybCwgcGFyYW1zKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIHBhZ2VzID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgIHBhZ2VzLnVuc2hpZnQoewogICAgICAgICAgICAgIHBhZ2VfaWQ6ICcwJywKICAgICAgICAgICAgICBwYWdlX3RpdGxlOiB0aGF0LiR0KCdhbGxfcGFnZXMnKQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGF0LnBhZ2VzID0gcGFnZXMKICAgICAgICAgICAgdGhhdC5wYWdlX2lkID0gJzAnCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgdGhpcy5nZXRfY2F0YWxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMuaXRlbV9pZCkKICAgIHRoaXMuaXRlbV9pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkCiAgfSwKICBiZWZvcmVEZXN0cm95ICgpIHt9Cn0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/item/export","sourcesContent":["<template>\n  <div class=\"hello\">\n    <Header></Header>\n\n    <el-container>\n      <el-card class=\"center-card\">\n        <el-form status-icon label-width=\"0px\" class=\"demo-ruleForm\">\n          <h2></h2>\n          <el-form-item label>\n            <el-radio-group v-model=\"export_format\">\n              <el-radio-button label=\"word\">{{$t('export_format_word')}}</el-radio-button>\n              <el-radio-button label=\"markdown\">{{$t('export_format_markdown')}}</el-radio-button>\n            </el-radio-group>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'word'\">\n            <el-radio v-model=\"export_type\" label=\"1\">{{$t('export_all')}}</el-radio>\n            <el-radio v-model=\"export_type\" label=\"2\">{{$t('export_cat')}}</el-radio>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'markdown'\">\n            <p class=\"markdown-tips\">{{$t('export_markdown_tips')}}</p>\n          </el-form-item>\n\n          <el-form-item label v-if=\"export_format == 'word' && export_type == 2\">\n            <el-select\n              :placeholder=\"$t('catalog')\"\n              class=\"cat\"\n              v-model=\"cat_id\"\n              v-if=\"computed_catalogs\"\n              @change=\"get_pages\"\n            >\n              <el-option\n                v-for=\"cat in computed_catalogs \"\n                :key=\"cat.cat_name\"\n                :label=\"cat.cat_name\"\n                :value=\"cat.cat_id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label v-if=\"export_format == 'word' && export_type == 2\">\n            <el-select class=\"cat\" v-model=\"page_id\" v-if=\"pages\">\n              <el-option\n                v-for=\"page in pages \"\n                :key=\"page.page_title\"\n                :label=\"page.page_title\"\n                :value=\"page.page_id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label>\n            <el-button type=\"primary\" style=\"width:100%;\" @click=\"onSubmit\">{{$t('begin_export')}}</el-button>\n          </el-form-item>\n\n          <el-form-item label>\n            <el-button type=\"text\" @click=\"goback\" class=\"goback-btn\">{{$t('goback')}}</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n    </el-container>\n\n    <Footer></Footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  components: {},\n  data () {\n    return {\n      catalogs: [],\n      cat_id: '',\n      export_type: '1',\n      item_id: 0,\n      export_format: 'word',\n      pages: [{\n        page_id: '0',\n        page_title: this.$t('all_pages')\n      }],\n      page_id: '0'\n    }\n  },\n  computed: {\n    // 新建/编辑页面时供用户选择的归属目录列表\n    computed_catalogs: function () {\n      var Info = this.catalogs.slice(0)\n      var cat_array = []\n      for (var i = 0; i < Info.length; i++) {\n        cat_array.push(Info[i])\n        var sub = Info[i].sub\n        if (sub.length > 0) {\n          for (var j = 0; j < sub.length; j++) {\n            cat_array.push({\n              cat_id: sub[j].ID,\n              cat_name: Info[i].name + ' / ' + sub[j].name\n            })\n            var sub_sub = sub[j].sub\n            if (sub_sub.length > 0) {\n              for (var k = 0; k < sub_sub.length; k++) {\n                cat_array.push({\n                  cat_id: sub_sub[k].ID,\n                  cat_name:\n                    Info[i].name +\n                    ' / ' +\n                    sub[j].name +\n                    ' / ' +\n                    sub_sub[k].name\n                })\n              }\n            }\n          }\n        }\n      }\n      var no_cat = { cat_id: '', cat_name: this.$t('none') }\n      cat_array.unshift(no_cat)\n      return cat_array\n    }\n  },\n  methods: {\n    // 获取所有目录\n    get_catalog (item_id) {\n      var that = this\n      var url = this.DocConfig.server + '/catListGroup'\n      var params = new URLSearchParams()\n      params.append('item_id', item_id)\n      that.axios\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var Info = response.data.data\n            that.catalogs = Info\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    onSubmit () {\n      if (this.export_type === 1) {\n        this.cat_id = ''\n      }\n      var url =\n        this.DocConfig.server +\n        '/api/export/word&item_id=' +\n        this.item_id +\n        '&cat_id=' +\n        this.cat_id + '&page_id=' + this.page_id\n      if (this.export_format === 'markdown') {\n        url = this.DocConfig.server + '/api/export/markdown&item_id=' + this.item_id\n      }\n      window.location.href = url\n    },\n    goback () {\n      this.$router.go(-1)\n    },\n    // 获取某目录下的所有页面\n    get_pages (cat_id) {\n      var that = this\n      var url = this.DocConfig.server + '/catalog/getPagesBycat'\n      var params = new URLSearchParams()\n      params.append('item_id', this.item_id)\n      params.append('cat_id', cat_id)\n      that.axios\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var pages = response.data.data\n            pages.unshift({\n              page_id: '0',\n              page_title: that.$t('all_pages')\n            })\n            that.pages = pages\n            that.page_id = '0'\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n    }\n  },\n  mounted () {\n    this.get_catalog(this.$route.params.item_id)\n    this.item_id = this.$route.params.item_id\n  },\n  beforeDestroy () {}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.center-card a {\n  font-size: 12px;\n}\n.center-card {\n  text-align: center;\n  width: 400px;\n}\n.markdown-tips {\n  text-align: left;\n  margin-left: 25px;\n  font-size: 12px;\n}\n</style>\n"]}]}