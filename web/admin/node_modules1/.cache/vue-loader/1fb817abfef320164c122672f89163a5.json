{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/setting/Profile.vue?vue&type=style&index=0&id=3f817390&scoped=true&lang=css&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/item/setting/Profile.vue","mtime":1626840518003},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNlbnRlci1jYXJkIGEgewogIGZvbnQtc2l6ZTogMTJweDsKfQouY2VudGVyLWNhcmQgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICB3aWR0aDogNjAwcHg7CiAgaGVpZ2h0OiA1MDBweDsKfQouaW5mb0Zvcm0gewogIHdpZHRoOiAzNTBweDsKICBtYXJnaW4tbGVmdDogMjBweDsKICBtYXJnaW4tdG9wOiA2MHB4Owp9Ci5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsKfQouYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBsaW5lLWhlaWdodDogMTc4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5hdmF0YXIgewogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGRpc3BsYXk6IGJsb2NrOwp9Cg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/components/item/setting","sourcesContent":["<template>\n  <div class=\"hello\">\n    <el-upload\n      class=\"avatar-uploader\"\n      :action=\"upUrl\"\n      :show-file-list=\"false\"\n      :on-success=\"handleAvatarSuccess\"\n      :before-upload=\"beforeAvatarUpload\"\n    >\n      <img v-if=\"infoProfile.avatarUrl\" :src=\"infoProfile.avatarUrl\" class=\"avatar\" />\n      <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n    </el-upload>\n    <el-form\n      status-icon\n      label-width=\"100px\"\n      class=\"infoForm\"\n      v-model=\"infoProfile\"\n    >\n      <el-form-item>\n        <el-input\n          type=\"text\"\n          auto-complete=\"off\"\n          v-model=\"infoProfile.avatarName\"\n          placeholder\n        ></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button\n          type=\"info\"\n          style=\"width:100%;\"\n          @click=\"addlistVisible = true\"\n          >{{ $t(\"setting\") }}</el-button\n        >\n      </el-form-item>\n\n      <el-form-item label>\n        <el-button type=\"primary\" style=\"width:100%;\" @click=\"FormSubmit\">{{\n          $t(\"submit\")\n        }}</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog\n      :title=\"$t('add_header')\"\n      :modal-append-to-body = false\n      :visible.sync=\"addlistVisible\"\n      width=\"520px\"\n      :before-close=\"beforeClose\"\n    >\n      <div >\n        <el-form :model=\"infoHeader\">\n          <div>\n            <el-form-item :label-width=\"formLabelWidth\">\n              <el-input\n                style=\"width:100px\"\n                :placeholder=\"$t('page_menu')\"\n                autocomplete=\"off\"\n                @input=\"change($event)\"\n                v-model=\"infoHeader.headerName\"\n              ></el-input>\n              <el-input\n                style=\"width:180px\"\n                :placeholder=\"$t('dest_addr')\"\n                autocomplete=\"off\"\n                @input=\"change($event)\"\n                v-model=\"infoHeader.headerUrl\"\n              ></el-input>\n               <el-select v-model=\"infoHeader.cid\" :placeholder=\"$t('language1')\" style=\"width:100px\" @input=\"change($event)\">\n                  <el-option\n                    v-for=\"item in belong_to_lang\"\n                    :key=\"item.id\"\n                    style=\"width:100px\"\n                    :label=\"item.name\"\n                    :value=\"item.id\">\n                  </el-option>\n                </el-select>\n          <el-button @click=\"jump_to_item(infoHeader.headerUrl)\" type=\"text\" size=\"small\">{{$t('link')}}</el-button>\n        <el-button @click=\"delete_header(infoHeader.headerId)\" type=\"text\" size=\"small\">{{$t('delete')}}</el-button>\n            </el-form-item>\n          </div>\n          <div v-for=\"(ddd,index) in counter\" :key=\"index\">\n                            <el-form-item :label-width=\"formLabelWidth\">\n                                <!--这里v-model绑定要 ddd.zyname   才能确保动态添加的所绑定的数值不一样-->\n                                <el-input style=\"width:100px\" v-model=\"ddd.headerName\" :placeholder=\"$t('page_menu')\" autocomplete=\"off\"></el-input>\n                                <el-input style=\"width:180px\" v-model=\"ddd.headerUrl\" :placeholder=\"$t('dest_addr')\" autocomplete=\"off\"></el-input>\n                                <el-select v-model=\"ddd.cid\" :placeholder=\"$t('language1')\" style=\"width:100px\">\n\n\n                  <el-option\n                    v-for=\"item in belong_to_lang\"\n                    :key=\"item.id\"\n                    style=\"width:100px\"\n                    :label=\"item.name\"\n                    :value=\"item.id\">\n                  </el-option>\n                </el-select>\n                <el-button @click=\"jump_to_item(ddd.headerUrl)\" type=\"text\" size=\"small\">{{$t('link')}}</el-button>\n                <el-button @click=\"remove(index)\" type=\"text\" size=\"small\">{{$t('delete')}}</el-button>\n                            </el-form-item>\n            </div>\n\n          <div class=\"ujm\">\n            <el-button class=\"addstyle\" type=\"info\" @click=\"addinput\"\n              >{{$t('add_link')}}</el-button\n            >\n          </div>\n        </el-form>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"goback\">{{$t('cancel')}}</el-button>\n        <el-button type=\"primary\" @click=\"determineadd\">{{$t('confirm')}}</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login\",\n  components: {},\n  data() {\n    return {\n      infoProfile:[],\n      infoHeader:{},\n      infoForm: {},\n      checkboxGroup3: [],\n      list: [],\n      dataIntArr: [],\n      imageUrl: \"\",\n      counter: [],\n      addlistVisible: false,\n      handleClose2: \"\",\n      formLabelWidth: \"0px\",\n      upUrl: DocConfig.server + \"/uploadImg\",\n      lang: [],\n    };\n  },\n  computed:{\n    belong_to_lang: function () {\n      var that = this\n      if (that.infoForm.lang_list === undefined){\n              return []\n            }\n            var langInfo =that.infoForm.lang_list.split(',')\n            var lang_array = []\n            if (that.lang.length > 0){\n              for (var k=0; k < langInfo.length; k++){\n                if (langInfo[k] === \"\"){\n                  return that.lang\n                }\n              for (var j=0; j < that.lang.length; j++){\n                if (that.lang[j].id === parseInt(langInfo[k])){\n                  lang_array.push({\n                    id: that.lang[j].id,\n                    name: that.lang[j].name,\n                    icon: that.lang[j].icon\n                  })\n                }\n              }\n              }\n            }\n            return lang_array\n    }\n  },\n  methods: {\n    get_item_avatar() {\n      var that = this;\n      var url = DocConfig.server + \"/avatar/profile\";\n      var params = new URLSearchParams();\n      params.append(\"item_id\", that.$route.params.item_id);\n      that.$http\n        .post(url, params)\n        .then(function(response) {\n          if (response.data.status === 200) {\n            var Info = response.data.data;\n\n            that.infoProfile = Info;\n          } else {\n            that.$alert(response.data.message);\n          }\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    handleClick(tab) {\n      this.list = tab;\n    },\n    FormSubmit() {\n      var that = this;\n      var url = DocConfig.server + \"/avatar/update\";\n      var params = new URLSearchParams();\n      params.append(\"item_id\", that.$route.params.item_id);\n      params.append(\"avatar_name\", this.infoProfile.avatarName);\n      params.append(\"uri\", this.infoProfile.avatarUrl);\n      that.$http\n        .post(url, params)\n        .then(function(response) {\n          if (response.data.status === 200) {\n            that.$message.success(response.data.message);\n          } else {\n            that.$alert(response.data.message);\n          }\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    },\n    handleRemove(file) {\n      console.log(file);\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleDownload(file) {\n      console.log(file);\n    },\n    addinput() {\n      this.counter.push({ headerName:'', headerUrl:'' ,cid:'',headerId:0});\n    },\n    remove(index) {\n      //splice 操作数组的方法\n      this.counter.splice(index, 1)\n    },\n    change (e) {\n      this.$forceUpdate()\n    },\n    delete_header(headerId) {\n      //splice 操作数组的方法\n      var that = this\n      var url = DocConfig.server + '/avatar/deleteHeader'\n      var params = new URLSearchParams()\n      if (headerId == undefined) {\n          that.infoHeader.headerName=''\n          that.infoHeader.headerUrl='' ,\n          that.infoHeader.cid='',\n          that.infoHeader.headerId=0\n      }\n      params.append('header_id', headerId)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            this.get_item_header()\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n\n    },\n    determineadd() {\n      var that = this\n      var ui = {\n        itemId : that.$route.params.item_id,\n        data : [{\n                  headerName : that.infoHeader.headerName,\n                  headerUrl : that.infoHeader.headerUrl,\n                  cid : that.infoHeader.cid,\n                  headerId : that.infoHeader.headerId\n                }]\n      }\n      var url = DocConfig.server + '/avatar/header'\n      var params = new URLSearchParams()\n      console.log( ui.data.push.apply(ui.data, that.counter) )\n      params.append('item_id',ui.itemId)\n      params.append('data',JSON.stringify(ui.data))\n      that.$http.post(url, params).then(function (response) {\n        if (response.data.status === 200) {\n          var json = response.data.data\n        } else {\n          that.$alert(response.data.message)\n        }\n      })\n      that.addlistVisible = false;\n    },\n    jump_to_item (urls) {\n         const url = 'http://' + urls\n         window.open(url)\n    },\n    handleAvatarSuccess(res, file) {\n      console.log(res.url);\n      this.infoProfile.avatarUrl = res.url;\n    },\n    beforeAvatarUpload(file) {\n      const isJPG = file.type === \"image/jpeg\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      const isPNG = file.type === \"image/png\";\n\n      if (!isJPG || !isPNG) {\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n    beforeClose(done) {\n      this.dialogVisible = false;\n      done();\n    },\n    get_lang () {\n      var that = this\n      var url = DocConfig.server + '/lang'\n      var params = new URLSearchParams()\n      that.$http.get(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var lang = response.data.data\n            // 创建上级目录选项\n            var Lang2 = lang.slice(0)\n            var no_cat = { ID: 0, name: that.$t('none') }\n            Lang2.unshift(no_cat)\n            that.lang = Lang2\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    get_item_info () {\n      var that = this\n      var url = DocConfig.server + '/item/detail'\n      var params = new URLSearchParams()\n      params.append('item_id', that.$route.params.item_id)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var Info1 = response.data.data\n            that.infoForm = Info1\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    goback () {\n       var that = this\n        that.addlistVisible= false\n        that.get_item_header()\n    },\n    get_item_header () {\n      var that = this\n      var url = DocConfig.server + '/avatar/getHeader'\n      var params = new URLSearchParams()\n      params.append('item_id', that.$route.params.item_id)\n      params.append('lang_id', 1)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n           var Info = response.data.data\n           that.counter = response.data.data\n           that.infoHeader.headerName = that.counter[0].headerName\n           that.infoHeader.headerUrl = that.counter[0].headerUrl\n           that.infoHeader.cid = that.counter[0].cid\n           that.infoHeader.headerId = that.counter[0].headerId\n           that.counter.shift()\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n  },\n  mounted() {\n    this.get_item_avatar()\n    this.get_lang()\n    this.get_item_info()\n    this.get_item_header()\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.center-card a {\n  font-size: 12px;\n}\n.center-card {\n  text-align: center;\n  width: 600px;\n  height: 500px;\n}\n.infoForm {\n  width: 350px;\n  margin-left: 20px;\n  margin-top: 60px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n"]}]}