{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/edit/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/page/edit/Index.vue","mtime":1627263099182},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFZGl0b3JtZCBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0VkaXRvcm1kJwppbXBvcnQgSnNvblRvVGFibGUgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Kc29uVG9UYWJsZScKaW1wb3J0IEpzb25CZWF1dGlmeSBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL0pzb25CZWF1dGlmeScKaW1wb3J0IFRlbXBsYXRlTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvcGFnZS9lZGl0L1RlbXBsYXRlTGlzdCcKaW1wb3J0IEhpc3RvcnlWZXJzaW9uIGZyb20gJ0AvY29tcG9uZW50cy9wYWdlL2VkaXQvSGlzdG9yeVZlcnNpb24nCmltcG9ydCBBdHRhY2htZW50TGlzdCBmcm9tICdAL2NvbXBvbmVudHMvcGFnZS9lZGl0L0F0dGFjaG1lbnRMaXN0JwppbXBvcnQgUGFzdGVUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvcGFnZS9lZGl0L1Bhc3RlVGFibGUnCmltcG9ydCBTb3J0UGFnZSBmcm9tICdAL2NvbXBvbmVudHMvcGFnZS9lZGl0L1NvcnRQYWdlJwppbXBvcnQgeyByZWRlclBhZ2VDb250ZW50IH0gZnJvbSAnQC9tb2RlbHMvcGFnZScKaW1wb3J0IHsKICBhcGlUZW1wbGF0ZVpoLAogIGRhdGFiYXNlVGVtcGxhdGVaaCwKICBhcGlUZW1wbGF0ZUVuLAogIGRhdGFiYXNlVGVtcGxhdGVFbgp9IGZyb20gJ0AvbW9kZWxzL3RlbXBsYXRlJwovLyB2YXIgJHMgPSByZXF1aXJlKCdzY3JpcHRqcycpCnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5JykKCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50RGF0ZTogbmV3IERhdGUoKSwKICAgICAgaXRlbUxpc3Q6IHt9LAogICAgICBjb250ZW50OiAnJywKICAgICAgdGl0bGU6ICcnLAogICAgICBpdGVtX2lkOiAwLAogICAgICBzX251bWJlcjogJycsCiAgICAgIHBhZ2VfaWQ6ICcnLAogICAgICBjaWQ6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgY2F0X2lkOiAnJywKICAgICAgY29weV9wYWdlX2lkOiAnJywKICAgICAgYXR0YWNobWVudF9jb3VudDogJycsCiAgICAgIGNhdGFsb2dzOiBbXSwKICAgICAgaXNMb2NrOiAwLAogICAgICBpbnRlcnZhbElkOiAwLAogICAgICBzYXZpbmc6IGZhbHNlLAogICAgICBsYW5nOiAnJywKICAgICAgbGFuZ3M6IFtdLAogICAgICBsYW5nX2FycmF5OltdLAogICAgICBpbmZvRm9ybTogW10KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDmlrDlu7ov57yW6L6R55uu5b2V5pe25L6b55So5oi36YCJ5oup55qE5LiK57qn55uu5b2V5YiX6KGoCiAgICBiZWxvbmdfdG9fY2F0YWxvZ3M6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLmNhdGFsb2dzIHx8IHRoaXMuY2F0YWxvZ3MubGVuZ3RoIDw9IDApIHsKICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgICB2YXIgSW5mbyA9IHRoaXMuY2F0YWxvZ3Muc2xpY2UoMCkKICAgICAgdmFyIGNhdF9hcnJheSA9IFtdCiAgICAgIC8vIOi/meS4quWHveaVsOWwhumAkuW9kgogICAgICB2YXIgcmVuYW1lID0gZnVuY3Rpb24gKGNhdGFsb2csIHBfY2F0X25hbWUpIHsKICAgICAgICBpZiAoY2F0YWxvZy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNhdGFsb2cubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgdmFyIGNhdF9uYW1lID0gcF9jYXRfbmFtZSArICcgLyAnICsgY2F0YWxvZ1tqXS5jYXRfbmFtZQogICAgICAgICAgICBjYXRfYXJyYXkucHVzaCh7CiAgICAgICAgICAgICAgY2F0X2lkOiBjYXRhbG9nW2pdLmNhdF9pZCwKICAgICAgICAgICAgICBjYXRfbmFtZTogY2F0X25hbWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgaWYgKGNhdGFsb2dbal0uc3ViICYmIGNhdGFsb2dbal0uc3ViLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICByZW5hbWUoY2F0YWxvZ1tqXS5zdWIsIGNhdF9uYW1lKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgSW5mby5sZW5ndGg7IGkrKykgewogICAgICAgIGNhdF9hcnJheS5wdXNoKEluZm9baV0pCiAgICAgICAgaWYgKEluZm9baV0uc3ViICE9IG51bGwpIHsKICAgICAgICAgIHJlbmFtZShJbmZvW2ldLnN1YiwgSW5mb1tpXS5jYXRfbmFtZSkKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIG5vX2NhdCA9IHsgY2F0X2lkOiAwLCBjYXRfbmFtZTogdGhpcy4kdCgnbm9uZScpIH0KICAgICAgY2F0X2FycmF5LnB1c2gobm9fY2F0KQogICAgICByZXR1cm4gY2F0X2FycmF5CiAgICB9LAogICAgYmVsb25nX3RvX2xhbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIGlmICh0aGF0LmluZm9Gb3JtLmxhbmdfbGlzdCA9PT0gdW5kZWZpbmVkKXsKICAgICAgICAgICAgICByZXR1cm4gW10KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbGFuZ0luZm8gPXRoYXQuaW5mb0Zvcm0ubGFuZ19saXN0LnNwbGl0KCcsJykKICAgICAgICAgICAgdmFyIGxhbmdfYXJyYXkgPSBbXQogICAgICAgICAgICBpZiAodGhhdC5sYW5ncy5sZW5ndGggPiAwKXsKICAgICAgICAgICAgICBmb3IgKHZhciBrPTA7IGsgPCBsYW5nSW5mby5sZW5ndGg7IGsrKyl7CiAgICAgICAgICAgICAgICBpZiAobGFuZ0luZm9ba10gPT09ICIiKXsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQubGFuZ3MKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmb3IgKHZhciBqPTA7IGogPCB0aGF0LmxhbmdzLmxlbmd0aDsgaisrKXsKICAgICAgICAgICAgICAgIGlmICh0aGF0LmxhbmdzW2pdLmlkID09PSBwYXJzZUludChsYW5nSW5mb1trXSkpewogICAgICAgICAgICAgICAgICBsYW5nX2FycmF5LnB1c2goewogICAgICAgICAgICAgICAgICAgIGlkOiB0aGF0LmxhbmdzW2pdLmlkLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoYXQubGFuZ3Nbal0ubmFtZSwKICAgICAgICAgICAgICAgICAgICBpY29uOiB0aGF0LmxhbmdzW2pdLmljb24KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBsYW5nX2FycmF5CgogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgRWRpdG9ybWQsCiAgICBKc29uVG9UYWJsZSwKICAgIEpzb25CZWF1dGlmeSwKICAgIFRlbXBsYXRlTGlzdCwKICAgIEF0dGFjaG1lbnRMaXN0LAogICAgUGFzdGVUYWJsZSwKICAgIFNvcnRQYWdlLAogICAgSGlzdG9yeVZlcnNpb24KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldF9sYW5nICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9sYW5nJwogICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCiAgICAgIHRoYXQuJGh0dHAuZ2V0KHVybCwgcGFyYW1zKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdGhhdC5sYW5ncyA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkKICAgIH0sCiAgICBnZXRfaXRlbV9pbmZvICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9pdGVtL2RldGFpbCcKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdpdGVtX2lkJywgdGhhdC4kcm91dGUucGFyYW1zLml0ZW1faWQpCiAgICAgIHRoYXQuJGh0dHAKICAgICAgICAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciBJbmZvMSA9IHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgICB0aGF0LmluZm9Gb3JtID0gSW5mbzEKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQuJGFsZXJ0KHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgLy8g6I635Y+W6aG16Z2i5YaF5a65CiAgICBnZXRfcGFnZV9jb250ZW50IChwYWdlX2lkKSB7CiAgICAgIGlmICghcGFnZV9pZCkgewogICAgICAgIHBhZ2VfaWQgPSB0aGlzLnBhZ2VfaWQKICAgICAgfQogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL2FkbWluL3BhZ2UnCiAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZV9pZCcsIHBhZ2VfaWQpCiAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIC8vIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yqg6L295oiQ5YqfIik7CiAgICAgICAgICAgIHRoYXQuY29udGVudCA9IHJlZGVyUGFnZUNvbnRlbnQocmVzcG9uc2UuZGF0YS5kYXRhLnBhZ2Vjb250ZW50KQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aGF0Lmluc2VydFZhbHVlKHRoYXQuY29udGVudCwgMSkKICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwIC8vIOWbnuWIsOmhtumDqAogICAgICAgICAgICB9LCA1MDApCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIOWmguaenOmVv+W6puWkp+S6jjMwMDAs5YiZ5YWz6Zet6aKE6KeICiAgICAgICAgICAgICAgaWYgKHRoYXQuY29udGVudC5sZW5ndGggPiAzMDAwKSB7CiAgICAgICAgICAgICAgICB0aGF0LmVkaXRvcl91bndhdGNoKCkKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhhdC5lZGl0b3Jfd2F0Y2goKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGF0LmRyYWZ0KCkKICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgdGhhdC50aXRsZSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wYWdldGl0bGUKICAgICAgICAgICAgdGhhdC5pdGVtX2lkID0gcmVzcG9uc2UuZGF0YS5kYXRhLml0ZW1pZAogICAgICAgICAgICB0aGF0LnNfbnVtYmVyID0gcmVzcG9uc2UuZGF0YS5kYXRhLnNudW1iZXIKICAgICAgICAgICAgdGhhdC5jaWQgPSByZXNwb25zZS5kYXRhLmRhdGEuY2lkCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRhbGVydChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KQogICAgfSwKICAgIGdldF9jYXRhbG9nIChpdGVtX2lkLCB2YWx1ZSkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL2NhdExpc3RHcm91cCcKICAgICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKQogICAgICBwYXJhbXMuYXBwZW5kKCdpdGVtX2lkJywgaXRlbV9pZCkKICAgICAgcGFyYW1zLmFwcGVuZCgnY2lkJywgdmFsdWUpCiAgICAgIHRoYXQuJGh0dHAKICAgICAgICAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIHZhciBJbmZvID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgIHRoYXQuY2F0YWxvZ3MgPSBJbmZvCgogICAgICAgICAgICB0aGF0LmdldF9kZWZhdWx0X2NhdCgpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICB9LAogICAgLy8g6I635Y+W6buY6K6k6K+l6YCJ5Lit55qE55uu5b2VCiAgICBnZXRfZGVmYXVsdF9jYXQgKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL2dldERlZmF1bHRDYXQnCiAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZV9pZCcsIHRoaXMuJHJvdXRlLnBhcmFtcy5wYWdlX2lkKQogICAgICBwYXJhbXMuYXBwZW5kKCdpdGVtX2lkJywgdGhhdC4kcm91dGUucGFyYW1zLml0ZW1faWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2NvcHlfcGFnZV9pZCcsIHRoaXMuY29weV9wYWdlX2lkKQogICAgICB0aGF0LiRodHRwLnBvc3QodXJsLCBwYXJhbXMpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAvLyB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MoIuWKoOi9veaIkOWKnyIpCiAgICAgICAgICAgIHZhciBqc29uID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgICAgICAgIHRoYXQuY2F0X2lkID0ganNvbgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC4kYWxlcnQocmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgLy8g5qC55o2u6K+t6KiA6YCJ5oup55uu5b2VCiAgICBzZWxlY3RDYXRhbG9nICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHRoYXQuZ2V0X2NhdGFsb2codGhpcy4kcm91dGUucGFyYW1zLml0ZW1faWQsIHRoaXMuY2lkKQogICAgfSwKICAgIC8vIOaPkuWFpeaVsOaNruWIsOe8lui+keWZqOS4reOAguaPkuWFpeWIsOWFieagh+WkhOOAguWmguaenOWPguaVsGlzX2NvdmVy5Li655yf77yM5YiZ5riF56m65ZCO5YaN5o+S5YWlKOWNs+imhueblinjgIIKICAgIGluc2VydFZhbHVlICh2YWx1ZSwgaXNfY292ZXIpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkVkaXRvcm1kIC8vIOiOt+WPluWtkOe7hOS7tgogICAgICAgIGlmIChpc19jb3ZlcikgewogICAgICAgICAgLy8g5riF56m6CiAgICAgICAgICBjaGlsZFJlZi5jbGVhcigpCiAgICAgICAgfTsKICAgICAgICBjaGlsZFJlZi5pbnNlcnRWYWx1ZSh2YWx1ZSkgLy8g6LCD55So5a2Q57uE5Lu255qE5pa55rOVCiAgICAgIH07CiAgICB9LAogICAgLy8g5o+S5YWlYXBp5qih5p2/CiAgICBpbnNlcnRfYXBpX3RlbXBsYXRlICgpIHsKICAgICAgdmFyIHZhbAogICAgICBpZiAodGhpcy4kY29va2llcy5nZXQoJ2xuZycpID09PSAnWkhfQ04nKSB7CiAgICAgICAgdmFsID0gYXBpVGVtcGxhdGVaaAogICAgICB9IGVsc2UgewogICAgICAgIHZhbCA9IGFwaVRlbXBsYXRlRW4KICAgICAgfQogICAgICB0aGlzLmluc2VydFZhbHVlKHZhbCkKICAgIH0sCiAgICAvLyDmj5LlhaXmlbDmja7lrZflhbjmqKHmnb8KICAgIGluc2VydF9kYXRhYmFzZV90ZW1wbGF0ZSAoKSB7CiAgICAgIHZhciB2YWwKICAgICAgaWYgKHRoaXMuJGNvb2tpZXMuZ2V0KCdsbmcnKSA9PT0gJ1pIX0NOJykgewogICAgICAgIHZhbCA9IGRhdGFiYXNlVGVtcGxhdGVaaAogICAgICB9IGVsc2UgewogICAgICAgIHZhbCA9IGRhdGFiYXNlVGVtcGxhdGVFbgogICAgICB9CiAgICAgIHRoaXMuaW5zZXJ0VmFsdWUodmFsKQogICAgfSwKICAgIGVkaXRvcl91bndhdGNoICgpIHsKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkVkaXRvcm1kIC8vIOiOt+WPluWtkOe7hOS7tgogICAgICBjaGlsZFJlZi5lZGl0b3JfdW53YXRjaCgpCiAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwYWdlX2lkX3Vud2F0Y2hfJyArIHRoaXMucGFnZV9pZCkpIHsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHRoaXMuJHQoJ2xvbmdfcGFnZV90aXBzJykpCiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgncGFnZV9pZF91bndhdGNoXycgKyB0aGlzLnBhZ2VfaWQsIDEpCiAgICAgIH0KICAgIH0sCiAgICBlZGl0b3Jfd2F0Y2ggKCkgewogICAgICBjb25zdCBjaGlsZFJlZiA9IHRoaXMuJHJlZnMuRWRpdG9ybWQgLy8g6I635Y+W5a2Q57uE5Lu2CiAgICAgIGNoaWxkUmVmLmVkaXRvcl93YXRjaCgpCiAgICB9LAogICAgLy8ganNvbui9rOWPguaVsOihqOagvAogICAgU2hvd0pzb25Ub1RhYmxlICgpIHsKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkpzb25Ub1RhYmxlIC8vIOiOt+WPluWtkOe7hOS7tgogICAgICBjaGlsZFJlZi5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyBqc29u5qC85byP5YyWCiAgICBTaG93SnNvbkJlYXV0aWZ5ICgpIHsKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkpzb25CZWF1dGlmeSAvLyDojrflj5blrZDnu4Tku7YKICAgICAgY2hpbGRSZWYuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICB9LAogICAgU2hvd1J1bkFwaSAoKSB7CiAgICAgIHdpbmRvdy5vcGVuKCdodHRwOi8vcnVuYXBpLmRvYy5jYy8nKQogICAgfSwKICAgIC8vIOabtOWkmuaooeadv+OAgeaooeadv+WIl+ihqAogICAgU2hvd1RlbXBsYXRlTGlzdCAoKSB7CiAgICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy4kcmVmcy5UZW1wbGF0ZUxpc3QgLy8g6I635Y+W5a2Q57uE5Lu2CiAgICAgIGNoaWxkUmVmLnNob3coKQogICAgfSwKICAgIFNob3dQYXN0ZVRhYmxlICgpIHsKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLlBhc3RlVGFibGUgLy8g6I635Y+W5a2Q57uE5Lu2CiAgICAgIGNoaWxkUmVmLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIC8vIOWxleekuuWOhuWPsueJiOacrAogICAgU2hvd0hpc3RvcnlWZXJzaW9uICgpIHsKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkhpc3RvcnlWZXJzaW9uIC8vIOiOt+WPluWtkOe7hOS7tgogICAgICBjaGlsZFJlZi5zaG93KCkKICAgIH0sCiAgICAvLyDlsZXnpLrpobXpnaLmjpLluo8KICAgIFNob3dTb3J0UGFnZSAoKSB7CiAgICAgIHRoaXMuc2F2ZSgoKSA9PiB7CiAgICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLlNvcnRQYWdlIC8vIOiOt+WPluWtkOe7hOS7tgogICAgICAgIGNoaWxkUmVmLnNob3coKQogICAgICB9KQogICAgfSwKICAgIHNhdmUgKGNhbGxiYWNrKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICBpZiAodGhpcy5zYXZpbmcpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICB0aGlzLnNhdmluZyA9IHRydWUKICAgICAgdmFyIGxvYWRpbmcgPSB0aGF0LiRsb2FkaW5nKCkKICAgICAgY29uc3QgY2hpbGRSZWYgPSB0aGlzLiRyZWZzLkVkaXRvcm1kCiAgICAgIHZhciBjb250ZW50ID0gY2hpbGRSZWYuZ2V0TWFya2Rvd24oKQogICAgICB2YXIgY2F0X2lkID0gdGhpcy5jYXRfaWQKICAgICAgdmFyIGl0ZW1faWQgPSB0aGF0LiRyb3V0ZS5wYXJhbXMuaXRlbV9pZAogICAgICB2YXIgcGFnZV9pZCA9IHRoYXQuJHJvdXRlLnBhcmFtcy5wYWdlX2lkCiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9wYWdlL3NhdmUnCiAgICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCkKICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZV9pZCcsIHBhZ2VfaWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2l0ZW1faWQnLCBpdGVtX2lkKQogICAgICBwYXJhbXMuYXBwZW5kKCdzX251bWJlcicsIHRoYXQuc19udW1iZXIpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ3BhZ2VfdGl0bGUnLCB0aGF0LnRpdGxlKQogICAgICBwYXJhbXMuYXBwZW5kKCdjYXRfaWQnLCBjYXRfaWQpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2NpZCcsIHRoaXMuY2lkKQogICAgICBwYXJhbXMuYXBwZW5kKCdwYWdlX2NvbnRlbnQnLCBlbmNvZGVVUklDb21wb25lbnQoY29udGVudCkpCiAgICAgIHBhcmFtcy5hcHBlbmQoJ2lzX3VybGVuY29kZScsIDEpCiAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKQogICAgICAgICAgdGhhdC5zYXZpbmcgPSBmYWxzZQogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MoIuWKoOi9veaIkOWKnyIpCiAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BhZ2VfY29udGVudCcpCiAgICAgICAgICAgICAgLy8gdGhhdC4kcm91dGVyLnB1c2goeyBwYXRoOiAnLycgKyBpdGVtX2lkLCBxdWVyeTogeyBwYWdlX2lkOiByZXNwb25zZS5kYXRhLmRhdGEucGFnZV9pZCB9IH0pCiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGF0LiR0KCdzYXZlX3N1Y2Nlc3MnKSwKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhhdC5kZWxldGVEcmFmdCgpCiAgICAgICAgICAgIGlmIChwYWdlX2lkIDw9IDApIHsKICAgICAgICAgICAgICB0aGF0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOiAnL3BhZ2UvZWRpdC8nICsgaXRlbV9pZCArICcvJyArIHJlc3BvbnNlLmRhdGEuZGF0YS5JRAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgdGhhdC5wYWdlX2lkID0gcmVzcG9uc2UuZGF0YS5kYXRhLklECiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQuJGFsZXJ0KHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAvLyDorr7nva7kuIDkuKrmnIDplb/lhbPpl63ml7bpl7QKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgbG9hZGluZy5jbG9zZSgpCiAgICAgICAgdGhhdC5zYXZpbmcgPSBmYWxzZQogICAgICB9LCAyMDAwMCkKICAgIH0sCiAgICBnb2JhY2sgKCkgewogICAgICB2YXIgdXJsID0gJy8nICsgdGhpcy4kcm91dGUucGFyYW1zLml0ZW1faWQKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB1cmwsIHF1ZXJ5OiB7IHBhZ2VfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5wYWdlX2lkIH0gfSkKICAgIH0sCiAgICBkcm9wZG93bl9jYWxsYmFjayAoZGF0YSkgewogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRhdGEoKQogICAgICB9CiAgICB9LAogICAgLy8g5Y+m5a2Y5Li65qih5p2/CiAgICBzYXZlX3RvX3RlbXBsYXRlICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy4kcmVmcy5FZGl0b3JtZAogICAgICB2YXIgY29udGVudCA9IGNoaWxkUmVmLmdldE1hcmtkb3duKCkKICAgICAgdGhpcy4kcHJvbXB0KHRoYXQuJHQoJ3NhdmVfdGVtcGxfdGl0bGUnKSwgJyAnLCB7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB2YXIgdXJsID0gRG9jQ29uZmlnLnNlcnZlciArICcvdGVtcGxhdGUvc2F2ZScKICAgICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpCiAgICAgICAgcGFyYW1zLmFwcGVuZCgndGVtcGxhdGVfdGl0bGUnLCBkYXRhLnZhbHVlKQogICAgICAgIHBhcmFtcy5hcHBlbmQoJ3RlbXBsYXRlX2NvbnRlbnQnLCBjb250ZW50KQogICAgICAgIHRoYXQuJGh0dHAucG9zdCh1cmwsIHBhcmFtcykKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoYXQuJGFsZXJ0KHRoYXQuJHQoJ3NhdmVfdGVtcGxfdGV4dCcpKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoYXQuJGFsZXJ0KHJlc3BvbnNlLmRhdGEubWVzc2FnZSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBTaG93QXR0YWNobWVudCAoKSB7CiAgICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy4kcmVmcy5BdHRhY2htZW50TGlzdCAvLyDojrflj5blrZDnu4Tku7YKICAgICAgY2hpbGRSZWYuc2hvdygpCiAgICB9LAogICAgLyoqIOeymOi0tOS4iuS8oOWbvueJhyAqKi8KICAgIG9uX3Bhc3RlICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy91cGxvYWQnCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgY2xpcGJvYXJkID0gZS5jbGlwYm9hcmREYXRhCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNsaXBib2FyZC5pdGVtcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgaWYgKGNsaXBib2FyZC5pdGVtc1tpXS5raW5kID09PSAnZmlsZScgfHwgY2xpcGJvYXJkLml0ZW1zW2ldLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA+IC0xKSB7CiAgICAgICAgICAgIHZhciBpbWFnZUZpbGUgPSBjbGlwYm9hcmQuaXRlbXNbaV0uZ2V0QXNGaWxlKCkKICAgICAgICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKQogICAgICAgICAgICBmb3JtLmFwcGVuZCgndCcsICdhamF4LXVwbG9hZHBpYycpCiAgICAgICAgICAgIGZvcm0uYXBwZW5kKCdlZGl0b3JtZC1pbWFnZS1maWxlJywgaW1hZ2VGaWxlKQogICAgICAgICAgICB2YXIgbG9hZGluZyA9ICcnCiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICh0eXBlLCBkYXRhKSB7CiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUgfHwgJ2JlZm9yZScKICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgIC8vIOW8gOWni+S4iuS8oAogICAgICAgICAgICAgICAgY2FzZSAnYmVmb3JlJzoKICAgICAgICAgICAgICAgICAgbG9hZGluZyA9IHRoYXQuJGxvYWRpbmcoKQogICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAvLyDmnI3liqHlmajov5Tlm57plJnor68KICAgICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzoKICAgICAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpCiAgICAgICAgICAgICAgICAgIHRoYXQuJGFsZXJ0KCflm77niYfkuIrkvKDlpLHotKUnKQogICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmiJDlip8KICAgICAgICAgICAgICAgIGNhc2UgJ3N1Y2Nlc3MnOgogICAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9ICchW10oLycgKyBkYXRhLnVybCArICcpJwogICAgICAgICAgICAgICAgICAgIHRoYXQuaW5zZXJ0VmFsdWUodmFsdWUpCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kYWxlcnQoJ+Wksei0pScpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc29sZS5sb2codHlwZSkKICAgICAgICAgICAgfQogICAgICAgICAgICAkLmFqYXgoewogICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgIGRhdGE6IGZvcm0sCiAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwKICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc3RhbmRhcmQvbm8tY2FsbGJhY2stbGl0ZXJhbAogICAgICAgICAgICAgICAgY2FsbGJhY2soJ2JlZm9yZScpCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHN0YW5kYXJkL25vLWNhbGxiYWNrLWxpdGVyYWwKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdlcnJvcicpCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHN0YW5kYXJkL25vLWNhbGxiYWNrLWxpdGVyYWwKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdzdWNjZXNzJywgZGF0YSkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDojYnnqL8KICAgIGRyYWZ0ICgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgIHZhciBwa2V5ID0gJ3BhZ2VfY29udGVudF8nICsgdGhpcy5wYWdlX2lkCiAgICAgIGNvbnN0IGNoaWxkUmVmID0gdGhpcy4kcmVmcy5FZGl0b3JtZAogICAgICAvLyDlrprml7bkv53lrZjmlofmnKzlhoXlrrnliLBsb2NhbFN0b3JhZ2UKICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHZhciBjb250ZW50ID0gY2hpbGRSZWYuZ2V0TWFya2Rvd24oKQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHBrZXksIGNvbnRlbnQpCiAgICAgIH0sIDMwICogMTAwMCkKICAgICAgLy8g5qOA5rWL5piv5ZCm5pyJ5a6a5pe25L+d5a2Y55qE5YaF5a65CiAgICAgIHZhciBwYWdlX2NvbnRlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwa2V5KQogICAgICBpZiAoCiAgICAgICAgcGFnZV9jb250ZW50ICYmCiAgICAgICAgcGFnZV9jb250ZW50Lmxlbmd0aCA+IDAgJiYKICAgICAgICBwYWdlX2NvbnRlbnQgIT09IGNoaWxkUmVmLmdldE1hcmtkb3duKCkgJiYKICAgICAgICBjaGlsZFJlZi5nZXRNYXJrZG93bigpICYmCiAgICAgICAgY2hpbGRSZWYuZ2V0TWFya2Rvd24oKS5sZW5ndGggPiAxMAogICAgICApIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwa2V5KQogICAgICAgIHRoYXQKICAgICAgICAgIC4kY29uZmlybSh0aGF0LiR0KCdkcmFmdF90aXBzJyksICcnLCB7CiAgICAgICAgICAgIHNob3dDbG9zZTogZmFsc2UKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoYXQuaW5zZXJ0VmFsdWUocGFnZV9jb250ZW50LCB0cnVlKQogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwa2V5KQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHBrZXkpCiAgICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgLy8g6YGN5Y6G5Yig6Zmk6I2J56i/CiAgICBkZWxldGVEcmFmdCAoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG5hbWUgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpCiAgICAgICAgaWYgKG5hbWUuaW5kZXhPZigncGFnZV9jb250ZW50XycpID4gLTEpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKG5hbWUpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g6ZSB5a6aCiAgICBhc3luYyBzZXRMb2NrICgpIHsKICAgICAgdmFyIHVybCA9IERvY0NvbmZpZy5zZXJ2ZXIgKyAnL3BhZ2Uvc2V0TG9jaycKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybWRhdGEuYXBwZW5kKCdwYWdlX2lkJywgdGhpcy5wYWdlX2lkKQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ2l0ZW1faWQnLCB0aGlzLml0ZW1faWQpCiAgICAgIGlmICh0aGlzLnBhZ2VfaWQgPiAwKSB7CiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCh1cmwsIGZvcm1kYXRhKQogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuaXNMb2NrID0gMQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOino+mZpOmUgeWumgogICAgYXN5bmMgdW5sb2NrICgpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9jaykgewogICAgICAgIHJldHVybiAvLyDmnKzmnaXlpITkuo7mnKrplIHlrprkuK3nmoTor53vvIzkuI3lj5Hotbfor7fmsYIKICAgICAgfQogICAgICB2YXIgdXJsID0gRG9jQ29uZmlnLnNlcnZlciArICcvcGFnZS9zZXRMb2NrJwogICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBmb3JtZGF0YS5hcHBlbmQoJ3BhZ2VfaWQnLCB0aGlzLnBhZ2VfaWQpCiAgICAgIGZvcm1kYXRhLmFwcGVuZCgnaXRlbV9pZCcsIHRoaXMuaXRlbV9pZCkKICAgICAgZm9ybWRhdGEuYXBwZW5kKCdsb2NrX3RvJywgMTAwMCkKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCh1cmwsIGZvcm1kYXRhKQogICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgdGhpcy5pc0xvY2sgPSAwCiAgICAgIH0KICAgIH0sCiAgICAvLyDlpoLmnpznlKjmiLflpITkuo7plIHlrprnirbmgIHnmoTor53vvIznlKjlv4Pot7Pkv53mjIHplIHlrpoKICAgIGhlYXJ0QmVhdExvY2sgKCkgewogICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuaXNMb2NrKSB7CiAgICAgICAgICB0aGlzLnNldExvY2soKQogICAgICAgIH0KICAgICAgfSwgMyAqIDYwICogMTAwMCkKICAgIH0sCiAgICAvLyDliKTmlq3pobXpnaLmmK/lkKbooqvplIHlrprnvJbovpEKICAgIGFzeW5jIHJlbW90ZUlzTG9jayAoKSB7CiAgICAgIHZhciB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9wYWdlL2lzTG9jaycKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm9ybWRhdGEuYXBwZW5kKCdwYWdlX2lkJywgdGhpcy5wYWdlX2lkKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KHVybCwgZm9ybWRhdGEpCiAgICAgIC8vIOWIpOaWreW3sue7j+mUgeWumuS6huS4jQogICAgICBpZiAocmVzLmRhdGEubG9jayA+IDApIHsKICAgICAgICBpZiAocmVzLmRhdGEuaXNDdXJVc2VyID4gMCkgewogICAgICAgICAgdGhpcy5pc0xvY2sgPSAxCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGFsZXJ0KHRoaXMuJHQoJ2xvY2tpbmcnKSArIHJlcy5kYXRhLmxvY2tVc2VybmFtZSkKICAgICAgICAgIHRoaXMuZ29iYWNrKCkKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZXRMb2NrKCkgLy8g5aaC5p6c5rKh5pyJ6KKr5Yir5Lq66ZSB5a6a77yM5YiZ6L+b57yW6L6R6aG16Z2i5ZCO6Ieq5bex6ZSB5a6a44CCCiAgICAgIH0KICAgIH0sCiAgICAvLyDnlLHkuo7pobXpnaLlhbPpl63kuovku7bml6Dms5Xnm7TmjqXlj5HotbflvILmraXnmoRhamF46K+35rGC77yM5omA5Lul55So5rWP6KeI5Zmo55qEbmF2aWdhdG9yLnNlbmRCZWFjb27mnaXlrp7njrAKICAgIHVuTG9ja09uQ2xvc2UgKCkgewogICAgICBsZXQgdXNlcl90b2tlbiA9ICcnCiAgICAgIGNvbnN0IHVzZXJpbmZvc3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJpbmZvJykKICAgICAgaWYgKHVzZXJpbmZvc3RyKSB7CiAgICAgICAgY29uc3QgdXNlcmluZm8gPSBKU09OLnBhcnNlKHVzZXJpbmZvc3RyKQogICAgICAgIGlmICh1c2VyaW5mbyAmJiB1c2VyaW5mby51c2VyX3Rva2VuKSB7CiAgICAgICAgICB1c2VyX3Rva2VuID0gdXNlcmluZm8udXNlcl90b2tlbgogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBhbmFseXRpY3NEYXRhID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7CiAgICAgICAgcGFnZV9pZDogdGhpcy5wYWdlX2lkLAogICAgICAgIGl0ZW1faWQ6IHRoaXMuaXRlbV9pZCwKICAgICAgICBsb2NrX3RvOiAxMDAwLAogICAgICB9KQogICAgICBjb25zdCB1cmwgPSBEb2NDb25maWcuc2VydmVyICsgJy9wYWdlL3NldExvY2snCiAgICAgIGlmICgnc2VuZEJlYWNvbicgaW4gbmF2aWdhdG9yKSB7CiAgICAgICAgbmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBhbmFseXRpY3NEYXRhKQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKQogICAgICAgIGNsaWVudC5vcGVuKCdQT1NUJywgdXJsLCBmYWxzZSkKICAgICAgICBjbGllbnQuc2VuZChhbmFseXRpY3NEYXRhKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHZhciB0aGF0ID0gdGhpcwogICAgdGhpcy5nZXRfaXRlbV9pbmZvKCkKICAgIHRoaXMuaXRlbV9pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkCiAgICB0aGlzLnBhZ2VfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGFnZV9pZAogICAgdGhpcy5jb3B5X3BhZ2VfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5jb3B5X3BhZ2VfaWQgPyB0aGlzLiRyb3V0ZS5xdWVyeS5jb3B5X3BhZ2VfaWQgOiAnJwogICAgaWYgKHRoaXMuY29weV9wYWdlX2lkID4gMCkgewogICAgICB0aGlzLmdldF9wYWdlX2NvbnRlbnQodGhpcy5jb3B5X3BhZ2VfaWQpCiAgICB9IGVsc2UgaWYgKHRoaXMucGFnZV9pZCA+IDApIHsKICAgICAgdGhpcy5nZXRfcGFnZV9jb250ZW50KHRoaXMucGFnZV9pZCkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaXRlbV9pZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkCiAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuJHQoJ3dlbGNvbWVfdXNlX2RvYycpCiAgICB9CiAgICB0aGlzLmNpZCA9IHRoaXMuaXRlbUxpc3QuY2lkCiAgICB0aGlzLmdldF9jYXRhbG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtX2lkKQogICAgdGhpcy5nZXRfbGFuZygpCiAgICB0aGlzLmhlYXJ0QmVhdExvY2soKQogICAgdGhpcy5yZW1vdGVJc0xvY2soKQogICAgdGhhdC5vbl9wYXN0ZSgpCiAgICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkgeyAvLyDlr7nmlbTkuKrpobXpnaLmlofmoaPnm5HlkKwg5YW26ZSu55uY5b+r5o236ZSuCiAgICAgIHZhciBrZXlOdW0gPSB3aW5kb3cuZXZlbnQgPyBlLmtleUNvZGUgOiBlLndoaWNoIC8vIOiOt+WPluiiq+aMieS4i+eahOmUruWAvAogICAgICBpZiAoa2V5TnVtID09PSA4MyAmJiBlLmN0cmxLZXkpIHsgLy8gQ3RybCArUyDkuLrkv53lrZgKICAgICAgICB0aGF0LnNhdmUoKQogICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICB9CiAgICB9CiAgICAvLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwYXN0ZScsIHRoaXMub25fcGFzdGUpCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy51bkxvY2tPbkNsb3NlKQogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7CiAgLy8gICAvLyDop6PpmaTlr7nnspjotLTkuIrkvKDlm77niYfnmoTnm5HlkKwKICAvLyAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgdGhpcy5vbl9wYXN0ZSkKICB0aGlzLiRtZXNzYWdlLmNsb3NlQWxsKCkKICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCkKICAgdGhpcy51bmxvY2soKQogICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy51bkxvY2tPbkNsb3NlKQogIH0KfQo="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/page/edit","sourcesContent":["<template>\n  <div class=\"hello\"\n   @keydown.ctrl.83.prevent=\"save\"\n    @keydown.meta.83.prevent=\"save\">\n    <Header> </Header>\n\n    <el-container class=\"container-narrow\">\n\n      <el-row class=\"masthead\">\n        <el-form :inline=\"true\"   class=\"demo-form-inline\" size=\"small\">\n          <el-form-item :label=\"$t('title')+' : '\">\n            <el-input  placeholder=\"\" v-model=\"title\"></el-input>\n          </el-form-item>\n          <el-form-item :label=\"$t('lang_setting')+' : '\">\n                <el-select  v-model=\"cid\" :placeholder=\"$t('lang_choose')\" class=\"lang\" @change=\"selectCatalog\">\n                <el-option\n                v-for=\"itemlang in belong_to_lang\"\n                :key=\"itemlang.id\"\n                :label=\"itemlang.name\"\n                :value=\"itemlang.id\">\n               </el-option>\n              </el-select>\n            </el-form-item>\n          <el-form-item :label=\"$t('catalog') + ' : '\">\n            <el-select\n              :placeholder=\"$t('optional')\"\n              class=\"cat\"\n              v-model=\"cat_id\"\n              v-if=\"belong_to_catalogs\"\n            >\n             <el-option\n                v-for=\"cat in belong_to_catalogs\"\n                :key=\"cat.cat_name\"\n                :label=\"cat.cat_name\"\n                :value=\"cat.cat_id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n            <el-form-item label>\n            <el-button type=\"text\" @click=\"ShowSortPage\">{{\n              $t('sort_pages')\n            }}</el-button>\n          </el-form-item>\n          <el-form-item label>\n            <el-button type=\"text\" @click=\"ShowHistoryVersion\">{{\n              $t('history_version')\n            }}</el-button>\n          </el-form-item>\n          <el-form-item class=\"pull-right\">\n              <el-dropdown  @command=\"dropdown_callback\" split-button type=\"primary\" size=\"medium\" trigger=\"click\" @click=\"save\" title=\"Ctrl + S\">\n                <span id=\"save-page\">{{ $t('save') }}</span>\n                <el-dropdown-menu slot=\"dropdown\">\n                  <el-dropdown-item :command=\"save_to_template\">{{$t('save_to_templ')}}</el-dropdown-item>\n                  <el-tooltip\n                  class=\"item\"\n                  effect=\"dark\"\n                  :content=\"$t('lock_edit_tips')\"\n                  placement=\"left\"\n                >\n                  <el-dropdown-item v-if=\"!isLock\" :command=\"setLock\">{{\n                    $t('lock_edit')\n                  }}</el-dropdown-item>\n                </el-tooltip>\n                <el-dropdown-item v-if=\"isLock\" :command=\"unlock\">{{\n                  $t('cacel_lock')\n                }}</el-dropdown-item>\n                  <!-- <el-dropdown-item>保存前添加注释</el-dropdown-item> -->\n                </el-dropdown-menu>\n              </el-dropdown>\n            <el-button type=\"\" size=\"medium\" @click=\"goback\">{{$t('cancel')}}</el-button>\n          </el-form-item>\n        </el-form>\n\n        <el-row class=\"fun-btn-group\">\n          <el-button type=\"\" size=\"medium\" @click=\"insert_api_template\">{{$t('insert_apidoc_template')}}</el-button>\n          <el-button type=\"\" size=\"medium\" @click=\"insert_database_template\">{{$t('insert_database_doc_template')}}</el-button>\n          <el-button type=\"\" size=\"medium\" @click.native=\"ShowTemplateList\">{{$t('more_templ')}}</el-button>\n            <el-dropdown split-button type=\"\" style=\"margin-left:100px;\" size=\"medium\" trigger=\"hover\" >\n              {{$t('json_tools')}}\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item @click.native=\"ShowJsonToTable\">{{$t('json_to_table')}}</el-dropdown-item>\n                <el-dropdown-item @click.native=\"ShowJsonBeautify\">{{$t('beautify_json')}}</el-dropdown-item>\n                <el-dropdown-item @click.native=\"ShowPasteTable\">{{$t('paste_insert_table')}}</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n          <el-button type=\"\" size=\"medium\" @click=\"ShowRunApi\">{{$t('http_test_api')}}</el-button>\n          <el-badge :value=\"attachment_count\" class=\"item\">\n            <el-button type size=\"medium\" @click=\"ShowAttachment\">{{$t('attachment')}}</el-button>\n          </el-badge>\n        </el-row>\n\n        <Editormd v-bind:content=\"content\" v-if=\"content\" ref=\"Editormd\"  type=\"editor\" ></Editormd>\n\n      </el-row>\n\n        <!-- 更多模板 -->\n        <TemplateList :callback=\"insertValue\" ref=\"TemplateList\"></TemplateList>\n\n        <!-- 历史版本 -->\n        <HistoryVersion :callback=\"insertValue\" ref=\"HistoryVersion\"></HistoryVersion>\n\n        <!-- Json转表格 组件 -->\n        <JsonToTable   :callback=\"insertValue\" ref=\"JsonToTable\" ></JsonToTable>\n\n        <!-- Json格式化 -->\n        <JsonBeautify :callback=\"insertValue\" ref=\"JsonBeautify\"></JsonBeautify>\n\n        <!-- 附件列表 -->\n      <AttachmentList\n        :callback=\"insertValue\"\n        :item_id=\"item_id\"\n        :manage=\"true\"\n        :page_id=\"page_id\"\n        ref=\"AttachmentList\"\n      ></AttachmentList>\n       <!-- 粘贴插入表格 -->\n      <PasteTable\n        :callback=\"insertValue\"\n        :item_id=\"item_id\"\n        :manage=\"true\"\n        :page_id=\"page_id\"\n        ref=\"PasteTable\"\n      ></PasteTable>\n\n      <!-- 页面排序 -->\n      <SortPage\n        :callback=\"insertValue\"\n        :belong_to_catalogs=\"belong_to_catalogs\"\n        :item_id=\"item_id\"\n        :page_id=\"page_id\"\n        :cat_id=\"cat_id\"\n        ref=\"SortPage\"\n      ></SortPage>\n      </el-container>\n    <Footer> </Footer>\n    <div class=\"\"></div>\n<!-- 模板存放的地方 -->\n<div id=\"api-doc-templ\"  ref=\"api_doc_templ\" style=\"display:none\">\n\n**简要描述：**\n\n- 用户注册接口\n\n**请求URL：**\n- ` http://xx.com/api/user/register `\n\n**请求方式：**\n- POST\n\n**参数：**\n\n|参数名|必选|类型|说明|\n|:----    |:---|:----- |-----   |\n|username |是  |string |用户名   |\n|password |是  |string | 密码    |\n|name     |否  |string | 昵称    |\n\n **返回示例**\n\n```\n  {\n    \"status\": 0,\n    \"data\": {\n      \"uid\": \"1\",\n      \"username\": \"12154545\",\n      \"name\": \"吴系挂\",\n      \"groupid\": 2 ,\n      \"reg_time\": \"1436864169\",\n      \"last_login_time\": \"0\",\n    }\n  }\n```\n\n **返回参数说明**\n\n|参数名|类型|说明|\n|:-----  |:-----|-----                           |\n|groupid |int   |用户组id，1：超级管理员；2：普通用户  |\n\n **备注**\n\n- 更多返回错误代码请看首页的错误代码描述\n\n</div>\n<div id=\"database-doc-templ\" ref=\"database_doc_templ\" style=\"display:none\">\n\n-  用户表，储存用户信息\n\n|字段|类型|空|默认|注释|\n|:----    |:-------    |:--- |-- -|------      |\n|uid    |int(10)     |否 |  |             |\n|username |varchar(20) |否 |    |   用户名  |\n|password |varchar(50) |否   |    |   密码    |\n|name     |varchar(15) |是   |    |    昵称     |\n|reg_time |int(11)     |否   | 0  |   注册时间  |\n\n- 备注：无\n\n</div>\n  </div>\n</template>\n\n<style scoped>\n  .container-narrow{\n    margin: 0 auto;\n    max-width: 90%;\n  }\n  .masthead{\n    width: 100%;\n    margin-top: 5px;\n  }\n  .cat{\n    width: 180px;\n  }\n  .num{\n    width: 60px;\n  }\n  .lang{\n    width: 120px;\n  }\n  .fun-btn-group{\n    margin-top: 15px;\n    margin-bottom: 15px;\n  }\n</style>\n\n<script>\nimport Editormd from '@/components/common/Editormd'\nimport JsonToTable from '@/components/common/JsonToTable'\nimport JsonBeautify from '@/components/common/JsonBeautify'\nimport TemplateList from '@/components/page/edit/TemplateList'\nimport HistoryVersion from '@/components/page/edit/HistoryVersion'\nimport AttachmentList from '@/components/page/edit/AttachmentList'\nimport PasteTable from '@/components/page/edit/PasteTable'\nimport SortPage from '@/components/page/edit/SortPage'\nimport { rederPageContent } from '@/models/page'\nimport {\n  apiTemplateZh,\n  databaseTemplateZh,\n  apiTemplateEn,\n  databaseTemplateEn\n} from '@/models/template'\n// var $s = require('scriptjs')\nvar $ = require('jquery')\n\nexport default {\n\n  data () {\n    return {\n      currentDate: new Date(),\n      itemList: {},\n      content: '',\n      title: '',\n      item_id: 0,\n      s_number: '',\n      page_id: '',\n      cid: '',\n      name: '',\n      cat_id: '',\n      copy_page_id: '',\n      attachment_count: '',\n      catalogs: [],\n      isLock: 0,\n      intervalId: 0,\n      saving: false,\n      lang: '',\n      langs: [],\n      lang_array:[],\n      infoForm: []\n    }\n  },\n  computed: {\n    // 新建/编辑目录时供用户选择的上级目录列表\n    belong_to_catalogs: function () {\n      if (!this.catalogs || this.catalogs.length <= 0) {\n        return []\n      }\n      var Info = this.catalogs.slice(0)\n      var cat_array = []\n      // 这个函数将递归\n      var rename = function (catalog, p_cat_name) {\n        if (catalog.length > 0) {\n          for (var j = 0; j < catalog.length; j++) {\n            var cat_name = p_cat_name + ' / ' + catalog[j].cat_name\n            cat_array.push({\n              cat_id: catalog[j].cat_id,\n              cat_name: cat_name\n            })\n            if (catalog[j].sub && catalog[j].sub.length > 0) {\n              rename(catalog[j].sub, cat_name)\n            }\n          }\n        }\n      }\n      for (var i = 0; i < Info.length; i++) {\n        cat_array.push(Info[i])\n        if (Info[i].sub != null) {\n          rename(Info[i].sub, Info[i].cat_name)\n        }\n      }\n      var no_cat = { cat_id: 0, cat_name: this.$t('none') }\n      cat_array.push(no_cat)\n      return cat_array\n    },\n    belong_to_lang: function () {\n      var that = this\n      if (that.infoForm.lang_list === undefined){\n              return []\n            }\n            var langInfo =that.infoForm.lang_list.split(',')\n            var lang_array = []\n            if (that.langs.length > 0){\n              for (var k=0; k < langInfo.length; k++){\n                if (langInfo[k] === \"\"){\n                  return that.langs\n                }\n              for (var j=0; j < that.langs.length; j++){\n                if (that.langs[j].id === parseInt(langInfo[k])){\n                  lang_array.push({\n                    id: that.langs[j].id,\n                    name: that.langs[j].name,\n                    icon: that.langs[j].icon\n                  })\n                }\n              }\n              }\n            }\n            return lang_array\n\n    }\n  },\n  components: {\n    Editormd,\n    JsonToTable,\n    JsonBeautify,\n    TemplateList,\n    AttachmentList,\n    PasteTable,\n    SortPage,\n    HistoryVersion\n  },\n  methods: {\n    get_lang () {\n      var that = this\n      var url = DocConfig.server + '/lang'\n      var params = new URLSearchParams()\n      that.$http.get(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            that.langs = response.data.data\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    get_item_info () {\n      var that = this\n      var url = DocConfig.server + '/item/detail'\n      var params = new URLSearchParams()\n      params.append('item_id', that.$route.params.item_id)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var Info1 = response.data.data\n            that.infoForm = Info1\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    // 获取页面内容\n    get_page_content (page_id) {\n      if (!page_id) {\n        page_id = this.page_id\n      }\n      var that = this\n      var url = DocConfig.server + '/admin/page'\n      var params = new URLSearchParams()\n      params.append('page_id', page_id)\n      that.$http.post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            // that.$message.success(\"加载成功\");\n            that.content = rederPageContent(response.data.data.pagecontent)\n            setTimeout(function () {\n              that.insertValue(that.content, 1)\n              document.body.scrollTop = document.documentElement.scrollTop = 0 // 回到顶部\n            }, 500)\n            setTimeout(function () {\n              // 如果长度大于3000,则关闭预览\n              if (that.content.length > 3000) {\n                that.editor_unwatch()\n              } else {\n                that.editor_watch()\n              }\n              that.draft()\n            }, 1000)\n            that.title = response.data.data.pagetitle\n            that.item_id = response.data.data.itemid\n            that.s_number = response.data.data.snumber\n            that.cid = response.data.data.cid\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    get_catalog (item_id, value) {\n      var that = this\n      var url = DocConfig.server + '/catListGroup'\n      var params = new URLSearchParams()\n      params.append('item_id', item_id)\n      params.append('cid', value)\n      that.$http\n        .post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            var Info = response.data.data\n            that.catalogs = Info\n\n            that.get_default_cat()\n          } else {\n            that.$message(response.data.message)\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n    },\n    // 获取默认该选中的目录\n    get_default_cat () {\n      var that = this\n      var url = DocConfig.server + '/getDefaultCat'\n      var params = new URLSearchParams()\n      params.append('page_id', this.$route.params.page_id)\n      params.append('item_id', that.$route.params.item_id)\n      params.append('copy_page_id', this.copy_page_id)\n      that.$http.post(url, params)\n        .then(function (response) {\n          if (response.data.status === 200) {\n            // that.$message.success(\"加载成功\")\n            var json = response.data.data\n            that.cat_id = json\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n    },\n    // 根据语言选择目录\n    selectCatalog () {\n      var that = this\n      that.get_catalog(this.$route.params.item_id, this.cid)\n    },\n    // 插入数据到编辑器中。插入到光标处。如果参数is_cover为真，则清空后再插入(即覆盖)。\n    insertValue (value, is_cover) {\n      if (value) {\n        const childRef = this.$refs.Editormd // 获取子组件\n        if (is_cover) {\n          // 清空\n          childRef.clear()\n        };\n        childRef.insertValue(value) // 调用子组件的方法\n      };\n    },\n    // 插入api模板\n    insert_api_template () {\n      var val\n      if (this.$cookies.get('lng') === 'ZH_CN') {\n        val = apiTemplateZh\n      } else {\n        val = apiTemplateEn\n      }\n      this.insertValue(val)\n    },\n    // 插入数据字典模板\n    insert_database_template () {\n      var val\n      if (this.$cookies.get('lng') === 'ZH_CN') {\n        val = databaseTemplateZh\n      } else {\n        val = databaseTemplateEn\n      }\n      this.insertValue(val)\n    },\n    editor_unwatch () {\n      const childRef = this.$refs.Editormd // 获取子组件\n      childRef.editor_unwatch()\n      if (sessionStorage.getItem('page_id_unwatch_' + this.page_id)) {\n      } else {\n        this.$message(this.$t('long_page_tips'))\n        sessionStorage.setItem('page_id_unwatch_' + this.page_id, 1)\n      }\n    },\n    editor_watch () {\n      const childRef = this.$refs.Editormd // 获取子组件\n      childRef.editor_watch()\n    },\n    // json转参数表格\n    ShowJsonToTable () {\n      const childRef = this.$refs.JsonToTable // 获取子组件\n      childRef.dialogFormVisible = true\n    },\n    // json格式化\n    ShowJsonBeautify () {\n      const childRef = this.$refs.JsonBeautify // 获取子组件\n      childRef.dialogFormVisible = true\n    },\n    ShowRunApi () {\n      window.open('http://runapi.doc.cc/')\n    },\n    // 更多模板、模板列表\n    ShowTemplateList () {\n      const childRef = this.$refs.TemplateList // 获取子组件\n      childRef.show()\n    },\n    ShowPasteTable () {\n      const childRef = this.$refs.PasteTable // 获取子组件\n      childRef.dialogFormVisible = true\n    },\n    // 展示历史版本\n    ShowHistoryVersion () {\n      const childRef = this.$refs.HistoryVersion // 获取子组件\n      childRef.show()\n    },\n    // 展示页面排序\n    ShowSortPage () {\n      this.save(() => {\n        const childRef = this.$refs.SortPage // 获取子组件\n        childRef.show()\n      })\n    },\n    save (callback) {\n      var that = this\n      if (this.saving) {\n        return false\n      }\n      this.saving = true\n      var loading = that.$loading()\n      const childRef = this.$refs.Editormd\n      var content = childRef.getMarkdown()\n      var cat_id = this.cat_id\n      var item_id = that.$route.params.item_id\n      var page_id = that.$route.params.page_id\n      var url = DocConfig.server + '/page/save'\n      var params = new URLSearchParams()\n      params.append('page_id', page_id)\n      params.append('item_id', item_id)\n      params.append('s_number', that.s_number)\n      params.append('page_title', that.title)\n      params.append('cat_id', cat_id)\n      params.append('cid', this.cid)\n      params.append('page_content', encodeURIComponent(content))\n      params.append('is_urlencode', 1)\n      that.$http.post(url, params)\n        .then(function (response) {\n          loading.close()\n          that.saving = false\n          if (response.data.status === 200) {\n            if (typeof callback === 'function') {\n              callback()\n            } else {\n              // that.$message.success(\"加载成功\")\n              // localStorage.removeItem('page_content')\n              // that.$router.push({ path: '/' + item_id, query: { page_id: response.data.data.page_id } })\n              that.$message({\n                showClose: true,\n                message: that.$t('save_success'),\n                type: 'success'\n              })\n            }\n            that.deleteDraft()\n            if (page_id <= 0) {\n              that.$router.push({\n                path: '/page/edit/' + item_id + '/' + response.data.data.ID\n              })\n              that.page_id = response.data.data.ID\n            }\n          } else {\n            that.$alert(response.data.message)\n          }\n        })\n      // 设置一个最长关闭时间\n      setTimeout(() => {\n        loading.close()\n        that.saving = false\n      }, 20000)\n    },\n    goback () {\n      var url = '/' + this.$route.params.item_id\n      this.$router.push({ path: url, query: { page_id: this.$route.params.page_id } })\n    },\n    dropdown_callback (data) {\n      if (data) {\n        data()\n      }\n    },\n    // 另存为模板\n    save_to_template () {\n      var that = this\n      const childRef = this.$refs.Editormd\n      var content = childRef.getMarkdown()\n      this.$prompt(that.$t('save_templ_title'), ' ', {\n      }).then(function (data) {\n        var url = DocConfig.server + '/template/save'\n        var params = new URLSearchParams()\n        params.append('template_title', data.value)\n        params.append('template_content', content)\n        that.$http.post(url, params)\n          .then(function (response) {\n            if (response.data.status === 200) {\n              that.$alert(that.$t('save_templ_text'))\n            } else {\n              that.$alert(response.data.message)\n            }\n          })\n      })\n    },\n    ShowAttachment () {\n      const childRef = this.$refs.AttachmentList // 获取子组件\n      childRef.show()\n    },\n    /** 粘贴上传图片 **/\n    on_paste () {\n      var that = this\n      var url = DocConfig.server + '/upload'\n      document.addEventListener('paste', function (e) {\n        var clipboard = e.clipboardData\n        for (var i = 0, len = clipboard.items.length; i < len; i++) {\n          if (clipboard.items[i].kind === 'file' || clipboard.items[i].type.indexOf('image') > -1) {\n            var imageFile = clipboard.items[i].getAsFile()\n            var form = new FormData()\n            form.append('t', 'ajax-uploadpic')\n            form.append('editormd-image-file', imageFile)\n            var loading = ''\n            var callback = function (type, data) {\n              type = type || 'before'\n              switch (type) {\n                // 开始上传\n                case 'before':\n                  loading = that.$loading()\n                  break\n                  // 服务器返回错误\n                case 'error':\n                  loading.close()\n                  that.$alert('图片上传失败')\n                  break\n                  // 上传成功\n                case 'success':\n                  loading.close()\n                  if (data.success === 1) {\n                    var value = '![](/' + data.url + ')'\n                    that.insertValue(value)\n                  } else {\n                    that.$alert('失败')\n                  }\n                  break\n              }\n              console.log(type)\n            }\n            $.ajax({\n              url: url,\n              type: 'POST',\n              dataType: 'json',\n              data: form,\n              processData: false,\n              contentType: false,\n              beforeSend: function () {\n                // eslint-disable-next-line standard/no-callback-literal\n                callback('before')\n              },\n              error: function () {\n                // eslint-disable-next-line standard/no-callback-literal\n                callback('error')\n              },\n              success: function (data) {\n                // eslint-disable-next-line standard/no-callback-literal\n                callback('success', data)\n              }\n            })\n            e.preventDefault()\n          }\n        }\n      })\n    },\n    // 草稿\n    draft () {\n      var that = this\n      var pkey = 'page_content_' + this.page_id\n      const childRef = this.$refs.Editormd\n      // 定时保存文本内容到localStorage\n      setInterval(() => {\n        var content = childRef.getMarkdown()\n        localStorage.setItem(pkey, content)\n      }, 30 * 1000)\n      // 检测是否有定时保存的内容\n      var page_content = localStorage.getItem(pkey)\n      if (\n        page_content &&\n        page_content.length > 0 &&\n        page_content !== childRef.getMarkdown() &&\n        childRef.getMarkdown() &&\n        childRef.getMarkdown().length > 10\n      ) {\n        localStorage.removeItem(pkey)\n        that\n          .$confirm(that.$t('draft_tips'), '', {\n            showClose: false\n          })\n          .then(() => {\n            that.insertValue(page_content, true)\n            localStorage.removeItem(pkey)\n          })\n          .catch(() => {\n            localStorage.removeItem(pkey)\n          })\n      }\n    },\n    // 遍历删除草稿\n    deleteDraft () {\n      for (var i = 0; i < localStorage.length; i++) {\n        var name = localStorage.key(i)\n        if (name.indexOf('page_content_') > -1) {\n          localStorage.removeItem(name)\n        }\n      }\n    },\n    // 锁定\n    async setLock () {\n      var url = DocConfig.server + '/page/setLock'\n      var formdata = new FormData()\n      formdata.append('page_id', this.page_id)\n      formdata.append('item_id', this.item_id)\n      if (this.page_id > 0) {\n        const { data: res } = await this.$http.post(url, formdata)\n        if (res.status === 200) {\n          this.isLock = 1\n        }\n      }\n    },\n    // 解除锁定\n    async unlock () {\n      if (!this.isLock) {\n        return // 本来处于未锁定中的话，不发起请求\n      }\n      var url = DocConfig.server + '/page/setLock'\n      var formdata = new FormData()\n      formdata.append('page_id', this.page_id)\n      formdata.append('item_id', this.item_id)\n      formdata.append('lock_to', 1000)\n      const { data: res } = await this.$http.post(url, formdata)\n      if (res.status === 200) {\n        this.isLock = 0\n      }\n    },\n    // 如果用户处于锁定状态的话，用心跳保持锁定\n    heartBeatLock () {\n      this.intervalId = setInterval(() => {\n        if (this.isLock) {\n          this.setLock()\n        }\n      }, 3 * 60 * 1000)\n    },\n    // 判断页面是否被锁定编辑\n    async remoteIsLock () {\n      var url = DocConfig.server + '/page/isLock'\n      var formdata = new FormData()\n      formdata.append('page_id', this.page_id)\n      const { data: res } = await this.$http.post(url, formdata)\n      // 判断已经锁定了不\n      if (res.data.lock > 0) {\n        if (res.data.isCurUser > 0) {\n          this.isLock = 1\n        } else {\n          this.$alert(this.$t('locking') + res.data.lockUsername)\n          this.goback()\n        }\n      } else {\n        this.setLock() // 如果没有被别人锁定，则进编辑页面后自己锁定。\n      }\n    },\n    // 由于页面关闭事件无法直接发起异步的ajax请求，所以用浏览器的navigator.sendBeacon来实现\n    unLockOnClose () {\n      let user_token = ''\n      const userinfostr = localStorage.getItem('userinfo')\n      if (userinfostr) {\n        const userinfo = JSON.parse(userinfostr)\n        if (userinfo && userinfo.user_token) {\n          user_token = userinfo.user_token\n        }\n      }\n      const analyticsData = new URLSearchParams({\n        page_id: this.page_id,\n        item_id: this.item_id,\n        lock_to: 1000,\n      })\n      const url = DocConfig.server + '/page/setLock'\n      if ('sendBeacon' in navigator) {\n        navigator.sendBeacon(url, analyticsData)\n      } else {\n        var client = new XMLHttpRequest()\n        client.open('POST', url, false)\n        client.send(analyticsData)\n      }\n    }\n  },\n  mounted () {\n    var that = this\n    this.get_item_info()\n    this.item_id = this.$route.params.item_id\n    this.page_id = this.$route.params.page_id\n    this.copy_page_id = this.$route.query.copy_page_id ? this.$route.query.copy_page_id : ''\n    if (this.copy_page_id > 0) {\n      this.get_page_content(this.copy_page_id)\n    } else if (this.page_id > 0) {\n      this.get_page_content(this.page_id)\n    } else {\n      this.item_id = this.$route.params.item_id\n      this.content = this.$t('welcome_use_doc')\n    }\n    this.cid = this.itemList.cid\n    this.get_catalog(this.$route.params.item_id)\n    this.get_lang()\n    this.heartBeatLock()\n    this.remoteIsLock()\n    that.on_paste()\n    document.onkeydown = function (e) { // 对整个页面文档监听 其键盘快捷键\n      var keyNum = window.event ? e.keyCode : e.which // 获取被按下的键值\n      if (keyNum === 83 && e.ctrlKey) { // Ctrl +S 为保存\n        that.save()\n        e.preventDefault()\n      }\n    }\n    // document.addEventListener('paste', this.on_paste)\n    window.addEventListener('beforeunload', this.unLockOnClose)\n  },\n  beforeDestroy () {\n  //   // 解除对粘贴上传图片的监听\n  //   document.removeEventListener('paste', this.on_paste)\n  this.$message.closeAll()\n  clearInterval(this.intervalId)\n   this.unlock()\n   window.removeEventListener('beforeunload', this.unLockOnClose)\n  }\n}\n</script>\n"]}]}