{"remainingRequest":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/admin/attachment/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/src/components/admin/attachment/Index.vue","mtime":1619061666363},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jimmy_c/go/src/awesomeProject3/web/admin/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2U6IDEsCiAgICAgIGNvdW50OiA3LAogICAgICBkaXNwbGF5X25hbWU6ICcnLAogICAgICB1c2VybmFtZTogJycsCiAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBvc2l0aXZlX3R5cGU6ICcxJywKICAgICAgYXR0YWNobWVudF90eXBlOiAnLTEnLAogICAgICB1c2VkOiAwCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0ICgpIHsKICAgICAgdGhpcy5yZXF1ZXN0KCcvYXR0YWNobWVudC9nZXRBbGxMaXN0JywgewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBjb3VudDogdGhpcy5jb3VudCwKICAgICAgICBhdHRhY2htZW50X3R5cGU6IHRoaXMuYXR0YWNobWVudF90eXBlLAogICAgICAgIGRpc3BsYXlfbmFtZTogdGhpcy5kaXNwbGF5X25hbWUsCiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUKICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICB2YXIganNvbiA9IGRhdGEuZGF0YQogICAgICAgIHRoaXMuZGF0YUxpc3QgPSBqc29uLmxpc3QKICAgICAgICB0aGlzLnRvdGFsID0gcGFyc2VJbnQoanNvbi50b3RhbCkKICAgICAgICB0aGlzLnVzZWQgPSBqc29uLnVzZWRfbQogICAgICB9KQogICAgfSwKICAgIC8vIOi3s+i9rOWIsOmhueebrgogICAganVtcF90b19pdGVtIChyb3cpIHsKICAgICAgY29uc3QgdXJsID0gJy8nICsgcm93Lml0ZW1faWQKICAgICAgd2luZG93Lm9wZW4odXJsKQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UgKGN1cnJlbnRQYWdlKSB7CiAgICAgIHRoaXMucGFnZSA9IGN1cnJlbnRQYWdlCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgb25TdWJtaXQgKCkgewogICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgdmlzaXQgKHJvdykgewogICAgICB3aW5kb3cub3Blbihyb3cudXJsKQogICAgfSwKICAgIGRlbGV0ZV9yb3cgKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKHRoaXMuJHQoJ2NvbmZpcm1fZGVsZXRlJyksICcgJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCdjb25maXJtJyksCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgnY2FuY2VsJyksCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMucmVxdWVzdCgnL2F0dGFjaG1lbnQvZGVsZXRlQXR0YWNobWVudCcsIHsKICAgICAgICAgIGZpbGVfaWQ6IHJvdy5maWxlX2lkCiAgICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh0aGlzLiR0KCdvcF9zdWNjZXNzJykpCiAgICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBiZWZvcmVEZXN0cm95ICgpIHsKICAgIHRoaXMuJG1lc3NhZ2UuY2xvc2VBbGwoKQogIH0KfQo="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components/admin/attachment","sourcesContent":["<template>\n  <div class=\"hello\">\n    <el-form :inline=\"true\" class=\"demo-form-inline\">\n      <el-form-item label>\n        <el-input v-model=\"display_name\" :placeholder=\"$t('display_name')\"></el-input>\n      </el-form-item>\n      <el-form-item label>\n        <el-select v-model=\"attachment_type\" placeholder>\n          <el-option :label=\"$t('all_attachment_type')\" value=\"-1\"></el-option>\n          <el-option :label=\"$t('image')\" value=\"1\"></el-option>\n          <el-option :label=\"$t('general_attachment')\" value=\"2\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label>\n        <el-input v-model=\"username\" :placeholder=\"$t('uploader')\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"onSubmit\">{{$t('search')}}</el-button>\n      </el-form-item>\n    </el-form>\n    <P>累计已使用 {{used}}M 空间</P>\n    <el-table :data=\"dataList\" style=\"width: 100%\">\n      <el-table-column prop=\"file_id\" :label=\"$t('file_id')\"></el-table-column>\n      <el-table-column prop=\"display_name\" :label=\"$t('display_name')\"></el-table-column>\n      <el-table-column prop=\"file_type\" :label=\"$t('file_type')\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"file_size_m\" :label=\"$t('file_size_m')\" width=\"140\"></el-table-column>\n      <el-table-column prop=\"visit_times\" :label=\"$t('visit_times')\" ></el-table-column>\n      <el-table-column prop=\"username\" :label=\"$t('uploader')\"></el-table-column>\n      <el-table-column prop=\"addtime\" :label=\"$t('add_time')\" width=\"160\"></el-table-column>\n      <el-table-column prop :label=\"$t('operation')\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"visit(scope.row)\" type=\"text\" size=\"small\">{{$t('visit')}}</el-button>\n          <el-button @click=\"delete_row(scope.row)\" type=\"text\" size=\"small\">{{$t('delete')}}</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"block\">\n      <span class=\"demonstration\"></span>\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :page-size=\"count\"\n        layout=\"total, prev, pager, next\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n</style>\n\n<script>\nexport default {\n  data () {\n    return {\n      page: 1,\n      count: 7,\n      display_name: '',\n      username: '',\n      dataList: [],\n      total: 0,\n      positive_type: '1',\n      attachment_type: '-1',\n      used: 0\n    }\n  },\n  methods: {\n    getList () {\n      this.request('/attachment/getAllList', {\n        page: this.page,\n        count: this.count,\n        attachment_type: this.attachment_type,\n        display_name: this.display_name,\n        username: this.username\n      }).then(data => {\n        var json = data.data\n        this.dataList = json.list\n        this.total = parseInt(json.total)\n        this.used = json.used_m\n      })\n    },\n    // 跳转到项目\n    jump_to_item (row) {\n      const url = '/' + row.item_id\n      window.open(url)\n    },\n    handleCurrentChange (currentPage) {\n      this.page = currentPage\n      this.getList()\n    },\n    onSubmit () {\n      this.page = 1\n      this.getList()\n    },\n    visit (row) {\n      window.open(row.url)\n    },\n    delete_row (row) {\n      this.$confirm(this.$t('confirm_delete'), ' ', {\n        confirmButtonText: this.$t('confirm'),\n        cancelButtonText: this.$t('cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.request('/attachment/deleteAttachment', {\n          file_id: row.file_id\n        }).then(data => {\n          this.$message.success(this.$t('op_success'))\n          this.getList()\n        })\n      })\n    }\n  },\n  mounted () {\n    this.getList()\n  },\n  beforeDestroy () {\n    this.$message.closeAll()\n  }\n}\n</script>\n"]}]}